"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[7546],{68470:function(n,e,t){t(72791);var i=t(80184),l=function(n){var e=n.children,t=n.className,l=n.alignItems,o=n.justifyContent,r=n.mobileFlex,s=n.flexDirection;return(0,i.jsx)("div",{className:"".concat(r?"d-flex":"d-md-flex"," ").concat(t," ").concat(s?"flex-"+s:""," ").concat(l?"align-items-"+l:""," ").concat(o?"justify-content-"+o:""),children:e})};l.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},e.Z=l},25566:function(n,e,t){t.d(e,{$A:function(){return J},Ap:function(){return N},Ho:function(){return V},K_:function(){return H},ND:function(){return A},S8:function(){return Y},U7:function(){return D},Vv:function(){return _},bb:function(){return C},ds:function(){return q},eX:function(){return B},iZ:function(){return R},j$:function(){return z},kZ:function(){return M},mq:function(){return k},oJ:function(){return U},q$:function(){return P},sZ:function(){return I},u$:function(){return T},vX:function(){return E},zN:function(){return w}});var i,l,o,r,s,a,d,u,c,f,m,p,g,v,$,h,x,b,Z,y,S,j,O,F=t(30168),L=t(27570),I=(0,L.Ps)(i||(i=(0,F.Z)(["\n    query allOnlineTypes {\n        allOnlineTypes {\n            id\n            name\n        }\n    }\n\n"]))),P=(0,L.Ps)(l||(l=(0,F.Z)(["\n    query allOnlineFiles ($folder: Int){\n        allOnlineFiles (folder: $folder){\n            id\n            file\n        }\n    }\n"]))),w=(0,L.Ps)(o||(o=(0,F.Z)(["\n    query allFolders ($folder: Int){\n        allFolders(folder: $folder){\n            id\n            name\n        }\n    }\n    "]))),C=(0,L.Ps)(r||(r=(0,F.Z)(["\n    mutation createOnlineFile($file: Upload!, $folder: Int) {\n        createOnlineFile(file: $file, folder: $folder) {\n            onlineFile {\n                id\n                file\n            }\n        }\n    }\n"]))),T=(0,L.Ps)(s||(s=(0,F.Z)(["\n    mutation createOnlineFileFolder($name: String, $subFolder: Int){\n        createOnlineFileFolder(name: $name, subFolder: $subFolder){\n            onlineFileFolder{\n                id\n            }\n        }\n    }\n"]))),k=(0,L.Ps)(a||(a=(0,F.Z)(["\n    mutation deleteOnlineFile ($id: ID) {\n        deleteOnlineFile (id: $id) {\n            onlineFile {\n                file\n            }\n        }\n    }\n"]))),N=(0,L.Ps)(d||(d=(0,F.Z)(["\n    mutation deleteOnlineFileFolder ($id: Int){\n        deleteOnlineFileFolder (id: $id){\n            onlineFileFolder {\n                name\n            }\n        }\n    }\n"]))),D=(0,L.Ps)(u||(u=(0,F.Z)(["\n    mutation createOnlineLesson ($description: String, $schoolyear: Int, $status: String) {\n        createOnlineLesson (description: $description, schoolyear: $schoolyear, status: $status) {\n            onlineLesson {\n                id\n            }\n        }\n    }\n"]))),M=(0,L.Ps)(c||(c=(0,F.Z)(["\n    mutation updateOnlineLesson ($description: String, $id: ID, $schoolyear: Int, $status: String) {\n        updateOnlineLesson (description: $description, id: $id, schoolyear: $schoolyear, status: $status) {\n            onlineLesson {\n                id\n            }\n        }\n    }\n"]))),_=(0,L.Ps)(f||(f=(0,F.Z)(["\n    query allOnlineLessonsPagination ($page: Int, $perPage: Int) {\n        allOnlineLessonsPagination (page: $page, perPage: $perPage) {\n            page\n            perPage\n            pageCount\n            totalCount\n            records{\n                id\n                schoolyear {\n                    id\n                    schoolyear\n                }\n                description\n                createdAt\n                status\n                createUserid {\n                    isTeacher\n                    teacher {\n                        name\n                        photo\n                    }\n                }\n            }\n        }\n    }\n"]))),B=(0,L.Ps)(m||(m=(0,F.Z)(["\n    query onlineLessonById ($id: Int!) {\n        onlineLessonById (id: $id) {\n            id\n            schoolyear {\n                schoolyear\n                id\n            }\n            description\n            status\n        }\n    }\n"]))),z=(0,L.Ps)(p||(p=(0,F.Z)(["\n    mutation deleteOnlineLesson ($id: ID) {\n        deleteOnlineLesson (id: $id) {\n            onlineLesson {\n                status\n            }\n        }\n    }\n"]))),q=(0,L.Ps)(g||(g=(0,F.Z)(["\n    query allOnlineSubByLesson ($onlineLesson: Int!) {\n        allOnlineSubByLesson (onlineLesson: $onlineLesson) {\n            id\n            title\n            description\n            createUserid {\n                isTeacher\n                teacher {\n                    name\n                }\n            }\n            onlineType {\n                id\n                name\n            }\n            onlineSubFileSet {\n                onlineFile {\n                    id\n                    file\n                }\n            }\n            status\n        }\n    }\n"]))),E=(0,L.Ps)(v||(v=(0,F.Z)(["\n    mutation createOnlineSub ($description: String, $onlineLesson: Int, $status: String, $title: String, $onlineType: Int) {\n        createOnlineSub (description: $description, onlineLesson: $onlineLesson, status: $status, title: $title, onlineType: $onlineType) {\n            onlineSub {\n                id\n            }\n        }\n    }\n"]))),H=(0,L.Ps)($||($=(0,F.Z)(["\n    mutation updateOnlineSub ( $description: String, $id: ID, $onlineLesson: Int, $status: String, $title: String, $onlineType: Int) {\n        updateOnlineSub (description: $description, id: $id, onlineLesson: $onlineLesson, status: $status, title: $title, onlineType: $onlineType) {\n            onlineSub {\n                id\n            }\n        }\n    }\n"]))),R=(0,L.Ps)(h||(h=(0,F.Z)(["\n    mutation deleteOnlineSub ($id: ID) {\n        deleteOnlineSub (id: $id) {\n            onlineSub {\n                title\n            }\n        }\n    }\n"]))),U=(0,L.Ps)(x||(x=(0,F.Z)(["\n    query onlineSubById ($id: Int!) {\n        onlineSubById (id: $id) {\n            title\n            description\n            onlineSubFileSet {\n                onlineFile {\n                    id\n                    file\n                }\n            }\n            onlineType {\n                id\n                name\n            }\n            onlineAttendanceSet {\n                student {\n                    id\n                    studentCode\n                    name\n                    familyName\n                }\n            }\n            status\n            createdAt\n        }\n    } \n"]))),V=(0,L.Ps)(b||(b=(0,F.Z)(["\n    mutation createOnlineStudent ($onlineLesson: Int, $studentCode: String, $section: Int) {\n        createOnlineStudent (onlineLesson: $onlineLesson, studentCode: $studentCode, section: $section) {\n            onlineStudent {\n                id\n            }\n        }\n    }\n"]))),A=(0,L.Ps)(Z||(Z=(0,F.Z)(["\n    mutation deleteOnlineStudent ($id: ID) {\n        deleteOnlineStudent (id: $id) {\n            onlineStudent {\n                student {\n                    name\n                }\n            }\n        }\n    }\n"]))),Y=(0,L.Ps)(y||(y=(0,F.Z)(["\n    query allOnlineStudentByLesson ($onlineLesson: Int!) {\n        allOnlineStudentByLesson (onlineLesson: $onlineLesson) {\n            id\n            student {\n                id\n                familyName\n                name\n                studentCode\n            }\n        }\n    }\n"]))),J=((0,L.Ps)(S||(S=(0,F.Z)(["\n    query allOnlineSubFiles ($onlineSub: Int) {\n        allOnlineSubFiles (onlineSub: $onlineSub) {\n            id\n            onlineFile {\n                id\n                file\n            }\n        }\n    }\n"]))),(0,L.Ps)(j||(j=(0,F.Z)(["\n    mutation createOnlineSubFile ($onlineFile: Int, $onlineSub: Int) {\n        createOnlineSubFile (onlineFile: $onlineFile, onlineSub: $onlineSub) {\n            onlineSubFile {\n                id\n            }\n        }\n    }\n"]))));(0,L.Ps)(O||(O=(0,F.Z)(["\n    mutation deleteOnlineSubFile ($id: Int) {\n        deleteOnlineSubFile (id: $id) {\n            onlineSubFile {\n                id\n            }\n        }\n    }\n"])))},88119:function(n,e,t){t.r(e),t.d(e,{default:function(){return k}});var i=t(72791),l=t(29439),o=t(96578),r=t(84376),s=t(20003),a=t(50419),d=t(87309),u=t(7405),c=t(36795),f=t(82464),m=t(31549),p=t(79335),g=t(91523),v=t(72426),$=t.n(v),h=t(68470),x=t(25566),b=t(82630),Z=t(74508),y=t(59305),S=t(38937),j=(t(39392),t(32385)),O=t(92885),F=t(75033),L=t(80184),I=function(n){return(0,L.jsx)(j.Z,{overlay:n.menu,placement:n.placement,trigger:["click"],children:(0,L.jsx)("div",{className:"ellipsis-dropdown",children:(0,L.jsx)(F.Z,{})})})};I.defaultProps={trigger:"click",placement:"bottomRight",menu:(0,L.jsx)(O.Z,{})};var P=I,w=(0,i.lazy)((function(){return Promise.all([t.e(3332),t.e(4033),t.e(7746)]).then(t.bind(t,99199))})),C=function(n){var e=n.permissions,t=(0,i.useState)(1),v=(0,l.Z)(t,2),j=v[0],O=v[1],F=(0,i.useState)(10),I=(0,l.Z)(F,2),C=I[0],T=I[1],k=s.Z.confirm,N=(0,o.a)(x.Vv,{variables:{page:j,perPage:C}}),D=N.loading,M=N.refetch,_=N.data,B=N.error,z=(0,r.D)(x.j$,{onCompleted:function(n){M(),a.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),q=(0,l.Z)(z,1)[0],E=(0,i.useState)(!1),H=(0,l.Z)(E,2),R=H[0],U=H[1],V=(0,i.useState)([]),A=(0,l.Z)(V,2),Y=A[0],J=A[1],X=(0,i.useState)(""),K=(0,l.Z)(X,2),Q=K[0],W=K[1],G=function(n){return(0,L.jsxs)("div",{className:"w-full flex flex-col space-y-2 bg-background p-2 rounded-2",onClick:function(n){return n&&n.stopPropagation&&n.stopPropagation()},children:[!0===e.edit&&(0,L.jsx)(d.Z,{onClick:function(){return J(n),W("edit"),void U(!0)},children:(0,L.jsx)(c.Z,{twoToneColor:"#ffdb00"})}),!0===e.destroy&&(0,L.jsx)(d.Z,{onClick:function(){return e=n.id,void k({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){q({variables:{id:e}})}});var e},children:(0,L.jsx)(f.Z,{twoToneColor:"#f42f2f"})})]})};return D?(0,L.jsx)(S.Z,{}):B?null:(0,L.jsxs)("div",{children:[!0===e.create&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(s.Z,{forceRender:!0,width:"80vw",visible:R,okText:(0,L.jsx)(b.Z,{id:"main.okText"}),cancelText:(0,L.jsx)(b.Z,{id:"main.cancelText"}),onCancel:function(){U(!1)},okButtonProps:{form:"LessonForm",key:"submit",htmlType:"submit"},children:(0,L.jsx)(w,{formType:Q,setIsModalVisible:U,editData:Y,refetch:M})}),(0,L.jsx)(h.Z,{justifyContent:"end",alignItems:"center",className:"py-2",children:(0,L.jsx)("div",{children:(0,L.jsxs)(d.Z,{style:{float:"right"},size:"small",type:"primary",onClick:function(){return W("create"),void U(!0)},children:[(0,L.jsx)(m.Z,{}),"  ",(0,L.jsx)(b.Z,{id:"add_new"})]})})})]}),(0,L.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6 w-full mt-4",children:_.allOnlineLessonsPagination.records.map((function(n,t){var i;return(0,L.jsxs)(g.rU,{to:"".concat(y.sH,"/online-lesson/").concat(n.id),className:"border-regular border-1 pt-[20px] px-[25px] pb-[25px] bg-emind/10 rounded-10 bg-cover bg-center",children:[Object.values(e).some((function(n){return!0===n}))&&(0,L.jsx)("div",{className:"flex items-center justify-end",children:(0,L.jsx)(P,{menu:G(n)})}),(0,L.jsx)("div",{children:(0,L.jsx)(p.$B,{className:"h-48",children:(0,L.jsx)("p",{className:"mb-[20px] leading-[1.786] whitespace-pre-line",children:n.description})})}),(0,L.jsxs)("div",{className:"flex flex-wrap items-center justify-between",children:[(0,L.jsxs)("div",{className:"flex items-center gap-[15px]",children:[(0,L.jsx)("img",{className:"w-[30px] h-[30px] rounded-full bg-emind",src:n.createUserid.teacher?y._O+n.createUserid.teacher.photo:y._O+"avatar01.png",alt:""}),(0,L.jsx)("span",{className:"text-[15px] font-medium ",children:null===(i=n.createUserid.teacher)||void 0===i?void 0:i.name})]}),(0,L.jsxs)("div",{className:"flex items-center gap-[15px]",children:[(0,L.jsx)(Z.Z,{className:"h-7 text-emind"}),(0,L.jsx)("p",{children:$()(n.createdAt).format("YYYY-MM-DD")})]})]})]},t)}))}),_.allOnlineLessonsPagination.pageCount>0&&(0,L.jsx)(u.Z,{className:"text-right mt-4",total:_.allOnlineLessonsPagination.totalCount,onChange:function(n,e){O(n),T(e)}})]})},T=t(59288),k=function(n){var e=(0,T.C)("add_online_lesson"),t=(0,T.C)("change_online_lesson"),i=(0,T.C)("delete_online_lesson"),l={create:e,create_sub:(0,T.C)("add_online_sub"),edit:t,destroy:i,view_student:(0,T.C)("view_online_student")};return Object.values(l).indexOf("loading")>-1?(0,L.jsx)(S.Z,{cover:"content"}):(0,L.jsx)(C,{title:n.title,permissions:l})}},82464:function(n,e,t){t.d(e,{Z:function(){return a}});var i=t(1413),l=t(72791),o={icon:function(n,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M292.7 840h438.6l24.2-512h-487z",fill:e}},{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-504-72h304v72H360v-72zm371.3 656H292.7l-24.2-512h487l-24.2 512z",fill:n}}]}},name:"delete",theme:"twotone"},r=t(8711),s=function(n,e){return l.createElement(r.Z,(0,i.Z)((0,i.Z)({},n),{},{ref:e,icon:o}))};s.displayName="DeleteTwoTone";var a=l.forwardRef(s)},36795:function(n,e,t){t.d(e,{Z:function(){return a}});var i=t(1413),l=t(72791),o={icon:function(n,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M761.1 288.3L687.8 215 325.1 577.6l-15.6 89 88.9-15.7z",fill:e}},{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89z",fill:n}}]}},name:"edit",theme:"twotone"},r=t(8711),s=function(n,e){return l.createElement(r.Z,(0,i.Z)((0,i.Z)({},n),{},{ref:e,icon:o}))};s.displayName="EditTwoTone";var a=l.forwardRef(s)},39392:function(n,e,t){n.exports=t.p+"static/media/user.a6143582309785dca610.png"},84376:function(n,e,t){t.d(e,{D:function(){return u}});var i=t(3431),l=t(72791),o=t(63124),r=t(5970),s=t(72364),a=t(29484),d=t(65046);function u(n,e){var t=(0,d.x)(null===e||void 0===e?void 0:e.client);(0,s.Vp)(n,s.n_.Mutation);var u=(0,l.useState)({called:!1,loading:!1,client:t}),c=u[0],f=u[1],m=(0,l.useRef)({result:c,mutationId:0,isMounted:!0,client:t,mutation:n,options:e});Object.assign(m.current,{client:t,options:e,mutation:n});var p=(0,l.useCallback)((function(n){void 0===n&&(n={});var e=m.current,t=e.client,l=e.options,s=e.mutation,d=(0,i.pi)((0,i.pi)({},l),{mutation:s});m.current.result.loading||d.ignoreResults||!m.current.isMounted||f(m.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:t});var u=++m.current.mutationId,c=(0,o.J)(d,n);return t.mutate(c).then((function(e){var i,l,o,s=e.data,d=e.errors,p=d&&d.length>0?new a.c({graphQLErrors:d}):void 0;if(u===m.current.mutationId&&!c.ignoreResults){var g={called:!0,loading:!1,data:s,error:p,client:t};m.current.isMounted&&!(0,r.D)(m.current.result,g)&&f(m.current.result=g)}return null===(l=null===(i=m.current.options)||void 0===i?void 0:i.onCompleted)||void 0===l||l.call(i,e.data,c),null===(o=n.onCompleted)||void 0===o||o.call(n,e.data,c),e})).catch((function(e){var i,l,o,s;if(u===m.current.mutationId&&m.current.isMounted){var a={loading:!1,error:e,data:void 0,called:!0,client:t};(0,r.D)(m.current.result,a)||f(m.current.result=a)}if((null===(i=m.current.options)||void 0===i?void 0:i.onError)||c.onError)return null===(o=null===(l=m.current.options)||void 0===l?void 0:l.onError)||void 0===o||o.call(l,e,c),null===(s=n.onError)||void 0===s||s.call(n,e,c),{data:void 0,errors:e};throw e}))}),[]),g=(0,l.useCallback)((function(){m.current.isMounted&&f({called:!1,loading:!1,client:t})}),[]);return(0,l.useEffect)((function(){return m.current.isMounted=!0,function(){m.current.isMounted=!1}}),[]),[p,(0,i.pi)({reset:g},c)]}},74508:function(n,e,t){var i=t(72791);var l=i.forwardRef((function(n,e){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor","aria-hidden":"true",ref:e},n),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}))}));e.Z=l}}]);
//# sourceMappingURL=7546.22fce073.chunk.js.map