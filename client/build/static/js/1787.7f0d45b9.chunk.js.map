{"version":3,"file":"static/js/1787.7f0d45b9.chunk.js","mappings":"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","sources":["views/auth-views/components/LoginForm.js","views/auth-views/authentication/login/index.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { Button, Form, Input, Alert, message } from \"antd\";\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n\tAUTH_TOKEN,\r\n} from 'redux/constants/Auth';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\"\r\nimport { gql, useMutation } from '@apollo/client';\r\nimport IntlMessage from 'components/util-components/IntlMessage';\r\nimport { UserContext } from 'hooks/UserContextProvider';\r\n\r\nconst LOG_IN = gql`\r\n    mutation tokenAuth($username: String!, $password: String!){\r\n        tokenAuth(username: $username, password: $password) {\r\n\t\t\tsuccess,\r\n\t\t\terrors,\r\n\t\t\tunarchiving,\r\n\t\t\ttoken,\r\n\t\t\t# refreshToken,\r\n\t\t\tunarchiving,\r\n\t\t\tuser {\r\n\t\t\t\tid,\r\n\t\t\t\tfirstName,\r\n\t\t\t\tlastName,\r\n\t\t\t\tusername,\r\n\t\t\t}\r\n        }\r\n    }\r\n`;\r\n\r\nexport const LoginForm = props => {\r\n\tlet history = useHistory();\r\n\r\n\tconst { user, refetch } = useContext(UserContext);\r\n\tconst token = localStorage.getItem(AUTH_TOKEN);\r\n\tconst [showMessage, setShowMessage] = useState(false)\r\n\r\n\tfunction hideAuthMessage() {\r\n\t\tsetShowMessage(false)\r\n\t}\r\n\r\n\tfunction showAuthMessage() {\r\n\t\tsetShowMessage(true)\r\n\t}\r\n\r\n\tconst [onLogin, { loading }] = useMutation(LOG_IN, {\r\n\t\tonCompleted: data => {\r\n\t\t\tswitch (data.tokenAuth.success) {\r\n\t\t\t\tcase true:\r\n\t\t\t\t\tmessage.success('Амжилттай нэвтэрлээ!')\r\n\t\t\t\t\tlocalStorage.setItem(AUTH_TOKEN, data.tokenAuth.token);\r\n\t\t\t\t\trefetch()\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tshowAuthMessage();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tif(showMessage) {\r\n\t\tsetTimeout(() => {\r\n\t\t\thideAuthMessage();\r\n\t\t}, 3000);\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tif (token && user) {\r\n\t\t\thistory.push('/app/home')\r\n\t\t}\r\n\t}, [user, token])\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<motion.div \r\n\t\t\t\tinitial={{ opacity: 0, marginBottom: 0 }} \r\n\t\t\t\tanimate={{ \r\n\t\t\t\t\topacity: showMessage ? 1 : 0,\r\n\t\t\t\t\tmarginBottom: showMessage ? 20 : 0 \r\n\t\t\t\t}}> \r\n\t\t\t\t<Alert type=\"error\" showIcon message={<IntlMessage id=\"login-fail\" />}></Alert>\r\n\t\t\t</motion.div>\r\n\t\t\t<Form \r\n\t\t\t\tlayout=\"vertical\" \r\n\t\t\t\tname=\"login-form\"\r\n\t\t\t\tonFinish={e => {\r\n\t\t\t\t\tonLogin({ variables: { username: e.username, password: e.password } });\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Form.Item \r\n\t\t\t\t\tname=\"username\" \r\n\t\t\t\t\tlabel={<IntlMessage id=\"username\" />}\r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Нэвтрэх нэр оруулна уу',\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}>\r\n\t\t\t\t\t<Input prefix={<UserOutlined className=\"text-primary\" />}/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item \r\n\t\t\t\t\tname=\"password\" \r\n\t\t\t\t\tlabel={\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<span><IntlMessage id=\"password\" /></span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t} \r\n\t\t\t\t\trules={[\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t\tmessage: 'Нууц үг оруулна уу',\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Input.Password prefix={<LockOutlined className=\"text-primary\" />}/>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t\t<Form.Item>\r\n\t\t\t\t\t<Button type=\"primary\" htmlType=\"submit\" block loading={loading}> <IntlMessage id=\"main.login\" /></Button>\r\n\t\t\t\t</Form.Item>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nLoginForm.propTypes = {\r\n\totherSignIn: PropTypes.bool,\r\n\tshowForgetPassword: PropTypes.bool,\r\n\textra: PropTypes.oneOfType([\r\n\t\tPropTypes.string,\r\n\t\tPropTypes.element\r\n\t]),\r\n};\r\n\r\nLoginForm.defaultProps = {\r\n\totherSignIn: true,\r\n\tshowForgetPassword: false\r\n};\r\n\r\nexport default LoginForm\r\n","import useDomain from \"hooks/useDomain\";\r\nimport React from \"react\";\r\nimport LoginForm from \"views/auth-views/components/LoginForm\";\r\nimport { classNames } from \"utils\";\r\n\r\nconst Login = () => {\r\n\r\n  const { domainData } = useDomain()\r\n\r\n  return (\r\n    <div className=\"min-h-screen overflow-hidden px-3 pt-2 bg-emind xl:bg-background\">\r\n      <div\r\n        className={classNames(\r\n          \"-m-2 sm:-mx-8 p-3 sm:px-8 relative h-screen lg:overflow-hidden\",\r\n          \"before:hidden before:xl:block before:content-[''] before:w-[57%] before:-mt-[28%] before:-mb-[16%] before:-ml-[13%] before:absolute before:inset-y-0 before:left-0 before:transform before:rotate-[-4.5deg] before:bg-emind-2/20 before:rounded-[100%]\",\r\n          \"after:hidden after:xl:block after:content-[''] after:w-[57%] after:-mt-[20%] after:-mb-[13%] after:-ml-[13%] after:absolute after:inset-y-0 after:left-0 after:transform after:rotate-[-4.5deg] after:bg-emind after:rounded-[100%]\",\r\n        )}\r\n      >\r\n        <div className=\"container relative z-10 sm:px-10\">\r\n          <div className=\"block grid-cols-2 gap-4 xl:grid\">\r\n            <div className=\"flex-col hidden min-h-screen xl:flex\">\r\n              <a href=\"\" className=\"flex items-center pt-5 -intro-x\">\r\n                <img\r\n                  alt=\"KGB\"\r\n                  className=\"w-20\"\r\n                  src={domainData.logo}\r\n                />\r\n              </a>\r\n              <div className=\"my-auto\">\r\n                <img\r\n                  alt=\"KGB\"\r\n                  className=\"w-1/2 -mt-16 -intro-x\"\r\n                  src='/img/login.png'\r\n                />\r\n                <div className=\"mt-10 text-3xl font-medium leading-tight text-white -intro-x\">\r\n                  KGB боловсролын систем<br />\r\n                  \r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex h-screen py-5 my-10 xl:h-auto xl:py-0 xl:my-0\">\r\n              <div className=\"w-full px-5 py-8 bg-background mx-auto my-auto rounded-md shadow-md xl:ml-20 xl:bg-transparent sm:px-8 xl:p-0 xl:shadow-none sm:w-3/4 lg:w-2/4 xl:w-auto\">\r\n                <img\r\n                  alt=\"KGB\"\r\n                  className=\"w-44 mx-auto my-4\"\r\n                  src={domainData.logo}\r\n                />\r\n                <LoginForm />\r\n                <div className=\"mt-10 text-center intro-x xl:mt-24 text-slate-600 xl:text-left\">\r\n                  <a className=\"text-primary \" href=\"\">\r\n                    Үйлчилгээний нөхцөл\r\n                  </a>{\" \"}\r\n                  &{\" \"}\r\n                  <a className=\"text-primary \" href=\"\">\r\n                    Нууцлалын бодлого\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["LOG_IN","gql","LoginForm","props","history","useHistory","useContext","UserContext","user","refetch","token","localStorage","getItem","AUTH_TOKEN","useState","showMessage","setShowMessage","useMutation","onCompleted","data","tokenAuth","success","message","setItem","onLogin","loading","setTimeout","useEffect","push","initial","opacity","marginBottom","animate","type","showIcon","IntlMessage","id","layout","name","onFinish","e","variables","username","password","label","rules","required","prefix","UserOutlined","className","LockOutlined","htmlType","block","defaultProps","otherSignIn","showForgetPassword","domainData","useDomain","classNames","href","alt","src","logo"],"sourceRoot":""}