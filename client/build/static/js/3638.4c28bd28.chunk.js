"use strict";(self.webpackChunkmkp=self.webpackChunkmkp||[]).push([[3638],{68470:function(e,n,t){t(72791);var i=t(80184),s=function(e){var n=e.children,t=e.className,s=e.alignItems,r=e.justifyContent,a=e.mobileFlex,l=e.flexDirection;return(0,i.jsx)("div",{className:"".concat(a?"d-flex":"d-md-flex"," ").concat(t," ").concat(l?"flex-"+l:""," ").concat(s?"align-items-"+s:""," ").concat(r?"justify-content-"+r:""),children:n})};s.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},n.Z=s},93721:function(e,n,t){t.d(n,{Eo:function(){return z},Gu:function(){return W},Ik:function(){return re},Iy:function(){return ne},LL:function(){return ue},NP:function(){return O},O2:function(){return R},OY:function(){return K},Qg:function(){return Q},TR:function(){return se},Ve:function(){return H},Wp:function(){return J},_2:function(){return le},cL:function(){return U},fW:function(){return Y},gT:function(){return te},jk:function(){return B},kQ:function(){return ie},nR:function(){return M},nx:function(){return V},qC:function(){return G},qQ:function(){return F},qz:function(){return ae},rb:function(){return E},vA:function(){return oe},vQ:function(){return X},wT:function(){return _},xs:function(){return D},zd:function(){return ee}});var i,s,r,a,l,u,o,c,d,m,p,x,T,$,f,v,h,Z,g,j,w,k,y,q,b,I,L,P,A,S,C=t(30168),N=t(27570),Q=(0,N.Ps)(i||(i=(0,C.Z)(["\n    query allOnlineTests {\n        allOnlineTests {\n            id\n            title\n            description\n            subject {\n                id\n                subject\n            }\n        }\n    }\n"]))),O=(0,N.Ps)(s||(s=(0,C.Z)(["\n    mutation createOnlineTest ($description: String, $subject: Int, $title: String) {\n        createOnlineTest (description: $description, subject: $subject, title: $title) {\n            onlineTest {\n                id\n            }\n        }\n    }\n"]))),D=(0,N.Ps)(r||(r=(0,C.Z)(["\n    mutation updateOnlineTest ($description: String, $id: ID, $subject: Int, $title: String) {\n        updateOnlineTest (description: $description, id: $id, subject: $subject, title: $title) {\n            OnlineTest {\n                id\n            }\n        }\n    }\n"]))),E=(0,N.Ps)(a||(a=(0,C.Z)(["\n    mutation deleteOnlineTest ($id: ID) {\n        deleteOnlineTest (id: $id) {\n            onlineTest {\n                id\n            }\n        }\n    }\n"]))),F=(0,N.Ps)(l||(l=(0,C.Z)(["\n    query allQuestionLevels {\n        allQuestionLevels {\n            level\n            id\n        }\n    }\n"]))),z=(0,N.Ps)(u||(u=(0,C.Z)(["\n    mutation createQuestionLevel ($level: String) {\n        createQuestionLevel (level: $level) {\n            questionLevel {\n                id\n            }\n        }\n    }\n"]))),U=(0,N.Ps)(o||(o=(0,C.Z)(["\n    mutation updateQuestionLevel ($level: String, $id: ID) {\n        updateQuestionLevel (level: $level, id: $id) {\n            questionLevel {\n                id\n            }\n        }\n    }\n"]))),B=(0,N.Ps)(c||(c=(0,C.Z)(["\n    mutation deleteQuestionLevel ($id: ID) {\n        deleteQuestionLevel (id: $id) {\n            questionLevel {\n                level\n            }\n        }\n    }\n"]))),M=(0,N.Ps)(d||(d=(0,C.Z)(["\n    query allQuestionsByTest ($id: Int!) {\n        allQuestionsByTest (id: $id) {\n            id\n            question\n            hint\n            image\n            answerType\n            questionLevel {\n                id\n                level\n            }\n            questionChoiceSet {\n                id\n                answer\n                score\n            }\n        }\n    }\n"]))),H=(0,N.Ps)(m||(m=(0,C.Z)(["\n    mutation createQuestion ($answerType: String, $hint: String, $image: Upload, $onlineTest: Int, $questionL: String, $questionLevel: Int) {\n        createQuestion (answerType: $answerType, hint: $hint, image: $image, onlineTest: $onlineTest, questionL: $questionL, questionLevel: $questionLevel) {\n            question {\n                id\n                answerType\n            }\n        }\n    }\n"]))),V=(0,N.Ps)(p||(p=(0,C.Z)(["\n    mutation updateQuestion ($answerType: String, $hint: String, $image: Upload, $onlineTest: Int, $questionL: String, $questionLevel: Int, $id: ID) {\n        updateQuestion (answerType: $answerType, hint: $hint, image: $image, onlineTest: $onlineTest, questionL: $questionL, questionLevel: $questionLevel, id: $id) {\n            question {\n                id\n                answerType\n            }\n        }\n    }\n"]))),G=(0,N.Ps)(x||(x=(0,C.Z)(["\n    mutation deleteQuestion ($id: ID) {\n        deleteQuestion (id: $id) {\n            question {\n                question\n            }\n        }\n    }\n"]))),_=(0,N.Ps)(T||(T=(0,C.Z)(["\n    mutation createQuestionChoice ($answer: String, $question: Int, $score: Decimal) {\n        createQuestionChoice (answer: $answer, question: $question, score: $score) {\n            questionChoice {\n                id\n            }\n        }\n    }\n"]))),R=(0,N.Ps)($||($=(0,C.Z)(["\n    mutation updateQuestionChoice ($answer: String, $question: Int, $score: Decimal, $id: ID) {\n        updateQuestionChoice (answer: $answer, question: $question, score: $score, id: $id) {\n            questionChoice {\n                id\n            }\n        }\n    }\n"]))),W=(0,N.Ps)(f||(f=(0,C.Z)(["\n    mutation deleteQuestionChoice ($id: ID) {\n        deleteQuestionChoice (id: $id) {\n            questionChoice {\n                score\n            }\n        }\n    }\n"]))),X=(0,N.Ps)(v||(v=(0,C.Z)(["\n    query allTakeTests {\n        allTakeTests {\n            id\n            title\n            description\n            startAt\n            endAt\n            duration\n            status\n        }\n    }\n"]))),Y=(0,N.Ps)(h||(h=(0,C.Z)(["\n    mutation createTakeTest ($duration: Int, $endAt: String, $startAt: String, $status: String, $description: String, $title: String) {\n        createTakeTest (duration: $duration, endAt: $endAt, startAt: $startAt, status: $status, description: $description, title: $title) {\n            takeTest {\n                status\n            }\n        }\n    }\n"]))),J=(0,N.Ps)(Z||(Z=(0,C.Z)(["\n    mutation updateTakeTest ($duration: Int, $endAt: String, $startAt: String, $status: String, $id: ID, $description: String, $title: String) {\n        updateTakeTest (duration: $duration, endAt: $endAt, startAt: $startAt, status: $status, id: $id, description: $description, title: $title) {\n            takeTest {\n                status\n            }\n        }\n    }\n"]))),K=(0,N.Ps)(g||(g=(0,C.Z)(["\n    mutation deleteTakeTest ($id: ID) {\n        deleteTakeTest (id: $id) {\n            takeTest {\n                status\n            }\n        }\n    }\n"]))),ee=(0,N.Ps)(j||(j=(0,C.Z)(["\n    query allParticipantByTest ($takeTest: Int!) {\n        allParticipantByTest (takeTest: $takeTest) {\n            id\n            student {\n                studentCode\n                familyName\n                name\n            }\n            started\n            completed\n            answerSet {\n                answerType\n                questionText\n                choices\n                score\n                givenAnswer\n            }\n        }\n    }\n"]))),ne=(0,N.Ps)(w||(w=(0,C.Z)(["\n    mutation createParticipant ($section: Int, $studentCode: String, $takeTest: Int) {\n        createParticipant (section: $section, studentCode: $studentCode, takeTest: $takeTest) {\n            participant {\n                id\n            }\n        }\n    }\n"]))),te=(0,N.Ps)(k||(k=(0,C.Z)(["\n    mutation deleteParticipant ($id: ID, $takeTest: Int) {\n        deleteParticipant (id: $id, takeTest: $takeTest) {\n            participant {\n                started\n            }\n        }\n    }\n"]))),ie=(0,N.Ps)(y||(y=(0,C.Z)(["\n    query allTakeLevelByTest ($takeTest: Int!) {\n        allTakeLevelByTest (takeTest: $takeTest) {\n            id\n            onlineTest {\n                id\n                title\n            }\n            questionLevel {\n                id\n                level\n            }\n            takeNumber\n        }\n    }\n"]))),se=(0,N.Ps)(q||(q=(0,C.Z)(["\n    mutation createTakeLevel ($onlineTest: Int, $questionLevel: Int, $takeNumber: Int, $takeTest: Int) {\n        createTakeLevel (onlineTest: $onlineTest, questionLevel: $questionLevel, takeNumber: $takeNumber, takeTest: $takeTest) {\n            takeLevel {\n                id\n            }\n        }\n    }\n"]))),re=(0,N.Ps)(b||(b=(0,C.Z)(["\n    mutation deleteTakeLevel ($id: ID) {\n        deleteTakeLevel (id: $id) {\n            takeLevel {\n                takeNumber\n            }\n        }\n    }\n"]))),ae=((0,N.Ps)(I||(I=(0,C.Z)(["\n    query allSections {\n        allSections {\n            id\n            section\n            studentSet {\n                id\n                studentCode\n            }\n        }\n    }\n"]))),(0,N.Ps)(L||(L=(0,C.Z)(["\n    query startTest ($takeTest: Int!) {\n        startTest (takeTest: $takeTest) {\n            id\n            questionText\n            choices\n            answerType\n            givenAnswer\n            question {\n                hint\n                image\n            }\n        }\n    }\n"])))),le=(0,N.Ps)(P||(P=(0,C.Z)(["\n    mutation updateAnswer ($givenAnswer: String, $id: ID) {\n        updateAnswer (givenAnswer: $givenAnswer, id: $id) {\n            answer {\n                id\n            }\n        }\n    }\n"]))),ue=(0,N.Ps)(A||(A=(0,C.Z)(["\n    query testTime ($takeTest: Int!) {\n        testTime (takeTest: $takeTest) {\n            duration\n            started\n            endAt\n        }\n    }\n"]))),oe=(0,N.Ps)(S||(S=(0,C.Z)(["\n    query finishTest ($takeTest: Int!) {\n        finishTest (takeTest: $takeTest) {\n            score\n        }\n    }\n"])))},43638:function(e,n,t){t.r(n),t.d(n,{default:function(){return V}});var i=t(29439),s=t(72791),r=t(86586),a=t(96578),l=t(64880),u=t(83373),o=t(50419),c=t(87309),d=t(66106),m=t(30914),p=t(66871),x=t(93721),T=t(72426),$=t.n(T),f=t(1413),v=t(30941),h=t(49389),Z=t(20003),g=t(73332),j=t(77063),w=t(36755),k=t(50881),y=t(32014),q=t(76864),b=t(35542),I=t(41938),L=t(67575),P=t(84376),A=t(59305),S=t(82630),C=t(80184),N=v.Z.Title,Q=v.Z.Paragraph,O=v.Z.Text,D=h.Z.TextArea,E=Z.Z.confirm,F={labelCol:{span:3},wrapperCol:{span:24}},z={wrapperCol:{span:32}},U=function(e){var n=e.answer,t=e.refetch,r=e.next,a=e.prev,l=e.setIsFinished,u=e.page,o=e.answers,d=g.Z.useForm(),m=(0,i.Z)(d,1)[0],T=(0,s.useState)(n),$=(0,i.Z)(T,2),v=$[0],h=$[1];(0,s.useEffect)((function(){if(n){var e=[],t="";if(h(n),n!==n.givenAnswer){if("TEXT"===n.answerType&&m.setFieldsValue({givenAnswer:n.givenAnswer}),"MULTIPLE"===n.answerType){var i=null===n||void 0===n?void 0:n.givenAnswer.split(",|");i.pop(),i.map((function(t){return n.choices.filter((function(e){return e.text===t})).map((function(n){return e.push(n.value)}))})),m.setFieldsValue({givenAnswer:e})}"CHOOSE"===n.answerType&&(n.choices.filter((function(e){return e.text===n.givenAnswer})).map((function(e){return t=e.value})),m.setFieldsValue({givenAnswer:t}))}}}),[n,m,v]);var Z=(0,P.D)(x._2,{onCompleted:function(e){t(),r()}}),U=(0,i.Z)(Z,2),B=U[0],M=U[1].loading;return void 0===v?(0,C.jsx)(j.ZP,{title:"\u0410\u0441\u0443\u0443\u043b\u0442 \u0430\u043b\u0433\u0430 \u0431\u0430\u0439\u043d\u0430!"}):(0,C.jsxs)(p.Z,{className:"bg-mkp/5",children:[(0,C.jsxs)(N,{level:3,children:[(0,C.jsx)(S.Z,{id:"question"})," ",u+1]}),(0,C.jsx)(Q,{children:v.questionText}),n.hint&&(0,C.jsxs)("div",{children:[(0,C.jsx)(N,{type:"secondary",level:4,children:(0,C.jsx)(S.Z,{id:"question.hint"})}),(0,C.jsx)(O,{type:"secondary",children:n.hint})]}),n.image&&(0,C.jsx)("div",{className:"p-2",children:(0,C.jsx)(w.Z,{preview:!1,style:{maxHeight:"400px"},className:"img-fluid",alt:"Preview",src:A._O+n.image})}),(0,C.jsxs)(g.Z,(0,f.Z)((0,f.Z)({},F),{},{layout:"vertical",form:m,name:"control-hooks",onFinish:function(e){e.id=v.id,"MULTIPLE"===v.answerType&&(e.givenAnswer=e.givenAnswer.map((function(e){return"".concat(e)})).join(",")),B({variables:e})},initialvaluess:{givenAnswer:v.givenAnswer},children:["TEXT"===v.answerType?(0,C.jsx)(g.Z.Item,{name:"givenAnswer",label:(0,C.jsx)(S.Z,{id:"question.answer"}),rules:[{required:!0,message:(0,C.jsx)(S.Z,{id:"form.required"})}],children:(0,C.jsx)(D,{rows:4})}):null,"CHOOSE"===v.answerType?(0,C.jsx)(g.Z.Item,{name:"givenAnswer",label:(0,C.jsx)(S.Z,{id:"question.answer"}),rules:[{required:!0,message:(0,C.jsx)(S.Z,{id:"form.required"})}],children:(0,C.jsx)(k.ZP.Group,{children:(0,C.jsx)("div",{className:"flex flex-col gap-2",children:v.choices.map((function(e,n){return(0,C.jsx)(k.ZP,{value:e.value,children:e.text},n)}))})})}):null,"MULTIPLE"===v.answerType?(0,C.jsx)(g.Z.Item,{name:"givenAnswer",label:(0,C.jsx)(S.Z,{id:"question.answer"}),rules:[{required:!0}],children:(0,C.jsx)(y.Z.Group,{children:(0,C.jsx)("div",{className:"flex flex-col gap-2 justify-start",children:v.choices.map((function(e,n){return(0,C.jsx)(y.Z,{value:e.value,children:e.text},n)}))})})}):null,(0,C.jsxs)(g.Z.Item,(0,f.Z)((0,f.Z)({},z),{},{children:[(0,C.jsxs)(c.Z,{disabled:u<1&&!0,className:"mr-2",type:"primary",htmlType:"button",loading:M,onClick:function(){return a()},children:[(0,C.jsx)(q.Z,{})," ",(0,C.jsx)(S.Z,{id:"main.previous"})]}),(0,C.jsxs)(c.Z,{disabled:u+1===o.length,type:"danger",className:"mr-2",htmlType:"button",loading:M,onClick:function(){return r()},children:[(0,C.jsx)(S.Z,{id:"main.skip"})," ",(0,C.jsx)(b.Z,{})]}),(0,C.jsxs)(c.Z,{disabled:u+1===o.length,className:"mr-2",type:"primary",htmlType:"submit",loading:M,children:[(0,C.jsx)(S.Z,{id:"main.next"})," ",(0,C.jsx)(I.Z,{})]}),u+1===o.length&&(0,C.jsxs)(c.Z,{style:{float:"right",background:"#5aac44",borderColor:"#5aac44",color:"#fff"},className:"mr-2",type:"danger",htmlType:"submit",onClick:function(){E({title:"\u0428\u0430\u043b\u0433\u0430\u043b\u0442 \u0434\u0443\u0443\u0441\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0414\u0443\u0443\u0441\u0433\u0430\u0445",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){l(!0)}})},children:[(0,C.jsx)(L.Z,{})," ",(0,C.jsx)(S.Z,{id:"main.finish-exam"})]})]}))]}))]})},B=t(38937),M=t(72454),H=u.Z.Countdown,V=function(){var e=(0,l.UO)(),n=(0,s.useState)(0),t=(0,i.Z)(n,2),u=t[0],T=t[1],f=(0,s.useState)(null),v=(0,i.Z)(f,2),h=v[0],Z=v[1],g=(0,s.useState)(!1),j=(0,i.Z)(g,2),w=j[0],k=j[1],y=(0,s.useState)(!0),q=(0,i.Z)(y,2),b=q[0],I=q[1],L=(0,s.useState)(0),P=(0,i.Z)(L,2),A=P[0],N=P[1],Q=(0,s.useState)([]),O=(0,i.Z)(Q,2),D=O[0],E=O[1],F=(0,r.t)(x.LL,{onCompleted:function(e){var n=$()(e.testTime.endAt),t=$()(e.testTime.started),i=$()();if($().duration(n.diff(i)).asMilliseconds()<0)return o.ZP.error("\u0425\u0443\u0433\u0430\u0446\u0430\u0430 \u0434\u0443\u0443\u0441\u0441\u0430\u043d \u0431\u0430\u0439\u043d\u0430!");$()(t).add(e.testTime.duration,"m").valueOf()<=$()(n).valueOf()?$().duration($()(t).add(e.testTime.duration,"m").diff(i)).asMilliseconds()<0||Z($()(t).add(e.testTime.duration,"m")):Z(n)}}),z=(0,i.Z)(F,1)[0],V=(0,r.t)(x.vA,{onCompleted:function(e){I(!1),o.ZP.warning("\u0428\u0430\u043b\u0433\u0430\u043b\u0442 \u0434\u0443\u0443\u0441\u0441\u0430\u043d!"),T(e.finishTest.score)}}),G=(0,i.Z)(V,2),_=G[0],R=G[1].called,W=(0,a.a)(x.qz,{variables:{takeTest:e.test},onCompleted:function(n){z({variables:{takeTest:e.test}});var t=[];null===n.startTest?k(!0):(n.startTest.map((function(e){var n=[];if("CHOOSE"===e.answerType||"MULTIPLE"===e.answerType){var i=e.choices.split(",|");i.pop(),i.map((function(e){var t=e.split(":|");return n.push({value:t[0],text:t[1]})}))}return t.push({hint:e.question.hint,image:e.question.image,answerType:e.answerType,givenAnswer:e.givenAnswer,id:e.id,questionText:e.questionText,choices:n})})),E(t),I(!1))}}).refetch;(0,s.useEffect)((function(){w&&_({variables:{takeTest:e.test}})}),[_,w,e]);var X=function(e){N(e)},Y=function(e){var n=e.answer,t=e.index;return t===A?(0,C.jsx)(c.Z,{shape:"circle",type:"primary",className:"mx-1",size:"small",onClick:function(){return X(t)},children:t+1},t):""===n.givenAnswer?(0,C.jsx)(c.Z,{shape:"circle",className:"mx-1",size:"small",onClick:function(){return X(t)},children:t+1},t):(0,C.jsx)(c.Z,{shape:"circle",type:"primary",className:"mx-1 bg-green-500",size:"small",onClick:function(){return X(t)},children:t+1},t)};return b?(0,C.jsx)(B.Z,{cover:"content"}):R?(0,C.jsx)(M.default,{score:u}):(0,C.jsx)("div",{children:(0,C.jsxs)(d.Z,{gutter:[8,16],children:[(0,C.jsx)(m.Z,{xs:24,xl:18,children:(0,C.jsx)(U,{answer:D[A],answers:D,page:A,next:function(){D.length>A+1&&N((function(e){return e+1}))},prev:function(){N((function(e){return e-1}))},refetch:W,setIsFinished:k})}),(0,C.jsxs)(m.Z,{xs:24,xl:6,children:[(0,C.jsx)(p.Z,{className:"bg-red-500/5",children:(0,C.jsx)(H,{title:(0,C.jsx)("span",{className:"mb-4",children:(0,C.jsx)(S.Z,{id:"exam.time-left"})}),value:h,onFinish:function(){return k(!0)}})}),(0,C.jsx)(p.Z,{title:(0,C.jsx)(S.Z,{id:"question"}),className:"bg-mkp/5",children:D.map((function(e,n){return 1,(0,C.jsx)(Y,{answer:e,index:n},n)}))}),(0,C.jsxs)(p.Z,{title:(0,C.jsx)(S.Z,{id:"exam.recommendations"}),className:"bg-blue-500/5",children:[(0,C.jsxs)("div",{className:"mt-2",children:[(0,C.jsx)(c.Z,{shape:"circle",type:"primary",className:"mx-1",size:"small",children:"1"}),(0,C.jsx)(S.Z,{id:"exam.current"})]}),(0,C.jsxs)("div",{className:"mt-2",children:[(0,C.jsx)(c.Z,{shape:"circle",type:"primary",className:"mx-1 bg-green-500",size:"small",children:"2"}),(0,C.jsx)(S.Z,{id:"exam.completed"})]}),(0,C.jsxs)("div",{className:"mt-2",children:[(0,C.jsx)(c.Z,{shape:"circle",className:"mx-1",size:"small",children:"3"}),(0,C.jsx)(S.Z,{id:"exam.uncompleted"})]})]})]})]})})}},72454:function(e,n,t){t.r(n);t(72791);var i=t(53834),s=t(82630),r=t(87309),a=t(91523),l=t(59305),u=t(68470),o=t(80184);n.default=function(e){var n=e.score;return(0,o.jsxs)("div",{className:"container text-center",children:[(0,o.jsx)(u.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:(0,o.jsx)(u.Z,{mobileFlex:!1,children:(0,o.jsx)("div",{className:"text-right",children:(0,o.jsx)(a.rU,{to:"".concat(l.sH,"/take-test"),children:(0,o.jsxs)(r.Z,{type:"default",icon:(0,o.jsx)(i.Z,{}),block:!0,children:[" ",(0,o.jsx)(s.Z,{id:"back"})]})})})})}),(0,o.jsxs)("div",{className:"py-lg-4 bg-mkp rounded-4 mt-4",children:[(0,o.jsx)("h1",{className:"text-white display-4",children:(0,o.jsx)(s.Z,{id:"total-exam-score"})}),(0,o.jsx)("p",{className:"text-white text-center text-2xl mt-2 mb-4 mx-auto",children:n})]})]})}}}]);
//# sourceMappingURL=3638.4c28bd28.chunk.js.map