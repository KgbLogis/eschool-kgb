"use strict";(self.webpackChunkmkp=self.webpackChunkmkp||[]).push([[5799],{41963:function(e,n,t){t.d(n,{Hi:function(){return g},KX:function(){return C},ar:function(){return f},nA:function(){return k},qv:function(){return b},wB:function(){return v}});var s,r,a,i,o,d,l,u,c,m,h,x,j,y,p=t(30168),Z=t(27570),f=(0,Z.Ps)(s||(s=(0,p.Z)(["\n    query studentReport ($studentCode: String) {\n        studentReport (studentCode: $studentCode) {\n            school\n            textTop\n            textMid\n            textBottom\n            studentPhoto\n            studentCode\n        }\n    }\n"]))),g=(0,Z.Ps)(r||(r=(0,p.Z)(["\n    query studentReportSection ($section: Int) {\n        studentReportSection (section: $section) {\n            school\n            textTop\n            textMid\n            textBottom\n            studentPhoto\n            studentCode\n        }\n    }\n"]))),b=((0,Z.Ps)(a||(a=(0,p.Z)(["\n    query allSections {\n        allSections {\n            id\n            section\n        }\n    }\n"]))),(0,Z.Ps)(i||(i=(0,p.Z)(["\n    query studentMarkReport ($studentCode: String) {\n        studentMarkReport (studentCode: $studentCode) {\n            school\n            textTop\n            textMid0\n            textMid1\n            textMid2\n            textMid3\n            textMid4\n            textMid5\n            textMid6\n            textMid7\n            textBottom\n            studentPhoto\n            studentCode\n        }\n    }\n"]))),(0,Z.Ps)(o||(o=(0,p.Z)(["\n    query studentMarkReportSection ($section: Int) {\n        studentMarkReportSection (section: $section) {\n            school\n            textTop\n            textMid0\n            textMid1\n            textMid2\n            textMid3\n            textMid4\n            textMid5\n            textMid6\n            textMid7\n            textBottom\n            studentPhoto\n            studentCode\n        }\n    }\n"]))),(0,Z.Ps)(d||(d=(0,p.Z)(["\n    query studentSchoolyear ($student: Int) {\n        studentSchoolyear (student: $student) {\n            id\n            schoolyear\n            season\n            semesterCode\n            startDate\n            endDate\n        }\n    }\n"]))),(0,Z.Ps)(l||(l=(0,p.Z)(["\n    query studentMarkRel ($student: Int, $schoolyear: Int) {\n        studentMarkRel (student: $student, schoolyear: $schoolyear) {\n            id\n            mark {\n                student {\n                    studentCode \n                }\n                markBoard {\n                    subject {\n                        id\n                        subject\n                        subjectCode\n                        credit\n                    }\n                    schoolyear {\n                        schoolyear \n                        season\n                    }\n                }\n            }\n            markSetting {\n                name\n                percentage\n            }\n            markVal\n        }\n    }\n"]))),(0,Z.Ps)(u||(u=(0,p.Z)(["\n    query markPercentage ($percentage: Int) {\n        markPercentage (percentage: $percentage) {\n            type\n            percentage\n            diam\n        }\n    }\n"]))),(0,Z.Ps)(c||(c=(0,p.Z)(["\n    query markCon ($subject: Int!, $schoolyear: Int!, $student: Int!) {\n        markCon (subject: $subject, schoolyear: $schoolyear, student: $student) {\n            percentage\n            type\n            diam\n        }\n    }\n"])))),v=(0,Z.Ps)(m||(m=(0,p.Z)(["\n    query markconSubject ($schoolyear: Int!, $section: Int!) {\n        markconSubject (schoolyear: $schoolyear, section: $section) {\n            subjectId\n            subject\n            subjectCode\n            subjectCredit\n        }\n    }\n"]))),C=(0,Z.Ps)(h||(h=(0,p.Z)(["\n    query markconStudent ($section: Int!) {\n        markconStudent (section: $section) {\n            studentId\n            familyName\n            name\n            studentCode\n            registerNo\n        }\n    }\n"]))),k=((0,Z.Ps)(x||(x=(0,p.Z)(["\n    query markConQuery ($section: Int!, $schoolyear: Int!) {\n        markconSubject (schoolyear: $schoolyear, section: $section) {\n            subjectId \n            subject\n            subjectCode\n            subjectCredit\n        }\n        markconStudent (section: $section) {\n            studentId\n            familyName\n            name\n            studentCode\n            registerNo\n        }\n    },\n"]))),(0,Z.Ps)(j||(j=(0,p.Z)(["\n    query markCon ($sdf: Array) {\n        D1934081_3: markCon(subject: 3, schoolyear: 1, student: 98150) {    \n            percentage    \n            type    \n            diam  \n        }  \n        D1934087_3: markCon(subject: 3, schoolyear: 1, student: 98489) { percentage    type    diam  }  \n        D1934076_3: markCon(subject: 3, schoolyear: 1, student: 103324) {    percentage    type    diam  }  \n        D1834046_3: markCon(subject: 3, schoolyear: 1, student: 98894) {    percentage    type    diam  }  \n        D1934077_3: markCon(subject: 3, schoolyear: 1, student: 100276) {    percentage    type    diam  }  \n        D1934073_3: markCon(subject: 3, schoolyear: 1, student: 104950) {    percentage    type    diam  }  \n        D1934089_3: markCon(subject: 3, schoolyear: 1, student: 100633) {    percentage    type    diam  }  \n        D1934086_3: markCon(subject: 3, schoolyear: 1, student: 100787) {    percentage    type    diam  }  \n        D1934098_3: markCon(subject: 3, schoolyear: 1, student: 105890) {    percentage    type    diam  }  \n        D1934075_3: markCon(subject: 3, schoolyear: 1, student: 101336) {    percentage    type    diam  }  \n        D1934071_3: markCon(subject: 3, schoolyear: 1, student: 101355) {    percentage    type    diam  }  \n        D1934084_3: markCon(subject: 3, schoolyear: 1, student: 101452) {    percentage    type    diam  }  \n        D1934090_3: markCon(subject: 3, schoolyear: 1, student: 101491) {    percentage    type    diam  }  \n        D1934088_3: markCon(subject: 3, schoolyear: 1, student: 102593) {    percentage    type    diam  }  \n        D1724120_3: markCon(subject: 3, schoolyear: 1, student: 103392) {    percentage    type    diam  }  \n        D1934080_3: markCon(subject: 3, schoolyear: 1, student: 104140) {    percentage    type    diam  }  \n        D1934079_3: markCon(subject: 3, schoolyear: 1, student: 105052) {    percentage    type    diam  }  \n        D1934097_3: markCon(subject: 3, schoolyear: 1, student: 105101) {    percentage    type    diam  }  \n        D1934103_3: markCon(subject: 3, schoolyear: 1, student: 105110) {    percentage    type    diam  }  \n        D1934096_3: markCon(subject: 3, schoolyear: 1, student: 105112) {    percentage    type    diam  }  \n        D1934074_3: markCon(subject: 3, schoolyear: 1, student: 105596) {    percentage    type    diam  }  \n        D1934078_3: markCon(subject: 3, schoolyear: 1, student: 105697) {    percentage    type    diam  }  \n        D1934094_3: markCon(subject: 3, schoolyear: 1, student: 107882) {    percentage    type    diam  }  \n        D1934104_3: markCon(subject: 3, schoolyear: 1, student: 107918) {    percentage    type    diam  }  \n        D1934101_3: markCon(subject: 3, schoolyear: 1, student: 107971) {    percentage    type    diam  }  \n        D1934100_3: markCon(subject: 3, schoolyear: 1, student: 108400) {    percentage    type    diam  }  \n        D1934093_3: markCon(subject: 3, schoolyear: 1, student: 109395) {    percentage    type    diam  } \n        D1934085_3: markCon(subject: 3, schoolyear: 1, student: 109445) {    percentage    type    diam  }  \n        D1744080_3: markCon(subject: 3, schoolyear: 1, student: 109448) {    percentage    type    diam  }  \n        D1934095_3: markCon(subject: 3, schoolyear: 1, student: 109996) {    percentage    type    diam  }  \n        D1934102_3: markCon(subject: 3, schoolyear: 1, student: 110102) {    percentage    type    diam  }  \n        D1934072_3: markCon(subject: 3, schoolyear: 1, student: 111723) {    percentage    type    diam  }  \n        D1834021_3: markCon(subject: 3, schoolyear: 1, student: 95960) {    percentage    type    diam  } \n        D1934091_3: markCon(subject: 3, schoolyear: 1, student: 105549) {    percentage    type    diam  }  \n        D1934092_3: markCon(subject: 3, schoolyear: 1, student: 111134) {    percentage    type    diam  }  \n        D1934083_3: markCon(subject: 3, schoolyear: 1, student: 111971) {    percentage    type    diam  }\n    }\n"]))),(0,Z.Ps)(y||(y=(0,p.Z)(["\n    query allStudentsReport {\n        allStudentsReport {\n            id\n            user {\n                id\n                username\n                email\n            }\n            studentCode\n            surname\n            familyName\n            name\n            religion\n            registerNo\n            nationality\n            state\n            photo\n            phone\n            address\n            activity {\n                id\n                name\n            }\n            joinDate\n            sex\n            birthdate\n            classtime {\n                id\n                name\n            }\n            birthCity {\n                id\n                name\n            }\n            birthDistrict {\n                id\n                name\n            }\n            status {\n                id\n                name\n            }\n            statusExtra {\n                id\n                name\n            }\n            school {\n                id\n                name\n            }\n            classes {\n                id\n                classes\n            }\n            section {\n                id\n                section\n            }\n            program {\n                id\n                program\n            }\n            joinSchoolyear {\n                id\n                schoolyear\n            }\n        }\n    }\n"]))))},68694:function(e,n,t){t.d(n,{Cm:function(){return y},Cx:function(){return x},FQ:function(){return j},JX:function(){return h},Z2:function(){return g},dT:function(){return p},gt:function(){return f},tL:function(){return Z}});var s,r,a,i,o,d,l,u,c=t(30168),m=t(27570),h=(0,m.Ps)(s||(s=(0,c.Z)(["\n    query allStudents ($filter: String) {\n        allStudents (filter: $filter) {\n            id\n            familyName\n            name\n            studentCode\n        }\n\t}\n"]))),x=(0,m.Ps)(r||(r=(0,c.Z)(["\n    query allTeachers ($filter: String) {\n        allTeachers (filter: $filter) {\n            id\n            familyName\n            name\n            teacherCode\n        }\n    }\n"]))),j=(0,m.Ps)(a||(a=(0,c.Z)(["\n    query allClassess ($filter: String, $program: Int) {\n        allClassess (filter: $filter, program: $program) {\n            id\n            classes\n        }\n\t}\n"]))),y=(0,m.Ps)(i||(i=(0,c.Z)(['\n    query allSubjects ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "subject", modelName: "Subject", filter: $filter) {\n            count\n        }\n        allSubjects (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            subject\n            content\n            createUserid {\n                firstName\n                lastName\n            }\n        }\n    }\n']))),p=(0,m.Ps)(o||(o=(0,c.Z)(["\n    query selectProgram {\n        allPrograms {\n            id\n            program\n        }\n    }\n"]))),Z=(0,m.Ps)(d||(d=(0,c.Z)(["\n    query sectionsByProgram ($program: Int!) {\n        sectionsByProgram (program: $program) {\n            id\n            section \n            classes {\n                classes\n            }\n        }\n    }\n"]))),f=(0,m.Ps)(l||(l=(0,c.Z)(["\n    query sectionsByClasses ($classes: Int!){\n        sectionsByClasses (classes: $classes) {\n            id \n            section\n        }\n    }\n"]))),g=(0,m.Ps)(u||(u=(0,c.Z)(['\n    query allStudentsPagination (\n        $page: Int\n        $perPage: Int\n        $filter: String = ""\n    ) {\n        allStudentsPagination (\n            page: $page\n            perPage: $perPage\n            filter: $filter\n        ) {\n            page\n            perPage\n            pageCount\n            totalCount\n            records {\n                id\n                name\n                familyName\n            }\n        }\n    }\n'])))},5799:function(e,n,t){t.r(n);var s=t(93433),r=t(4942),a=t(1413),i=t(29439),o=t(72791),d=t(20003),l=t(50419),u=t(49389),c=t(83099),m=t(87309),h=t(32014),x=t(59432),j=t(11730),y=t(36795),p=t(82464),Z=t(76610),f=t(96578),g=t(84376),b=t(41963),v=t(82630),C=t(2703),k=t(69241),D=t(53793),I=t(16049),q=t(34341),S=t(59288),$=t(36319),w=t(19545),P=t(49696),N=t(64856),_=t(80184),M=d.Z.confirm;n.default=function(){var e=(0,o.useState)([]),n=(0,i.Z)(e,2),t=n[0],d=n[1],Y=(0,o.useState)({}),F=(0,i.Z)(Y,2),R=F[0],T=F[1],B=(0,o.useState)({}),E=(0,i.Z)(B,2),z=E[0],A=E[1],L=(0,o.useRef)(),V=(0,f.a)(b.nA,{onCompleted:function(e){d(e.allStudentsReport)}}),K=V.data,O=V.loading,Q=V.refetch;console.log(R);var U=(0,g.D)(N.mL,{onCompleted:function(e){Q(),l.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),X=(0,i.Z)(U,1)[0];function H(e,n,t,s){n(),T((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,r.Z)({},t+s,e[0]))}))}function J(e,n){return{filterDropdown:function(t){var s=t.setSelectedKeys,r=t.selectedKeys,i=t.confirm,o=t.clearFilters;return(0,_.jsxs)("div",{className:"p-2",children:[(0,_.jsx)(u.Z,{placeholder:"\u0425\u0430\u0439\u0445",value:r[0],onChange:function(e){return s(e.target.value?[e.target.value]:[])},onPressEnter:function(){return H(r,i,e,n)},style:{marginBottom:8,display:"block"}}),(0,_.jsxs)(c.Z,{children:[(0,_.jsx)(m.Z,{type:"primary",onClick:function(){return H(r,i,e,n)},icon:(0,_.jsx)(j.Z,{}),size:"small",style:{width:90},children:" \u0425\u0430\u0439\u0445 "}),(0,_.jsx)(m.Z,{onClick:function(){return function(e,n,t){e(),T((function(e){var s=(0,a.Z)({},e);return delete s[n+t],s}))}(o,e,n)},size:"small",style:{width:90},children:" \u0410\u0440\u0438\u043b\u0433\u0430\u0445 "})]})]})},filterIcon:function(e){return(0,_.jsx)(j.Z,{className:(0,C.AK)(e?"text-[#F8B6A8]":"")})},onFilter:function(t,s){return n?s[e][n].toString().toLowerCase().includes(t.toLowerCase()):s[e].toString().toLowerCase().includes(t.toLowerCase())},render:function(e){return e}}}var G=(0,o.useState)([(0,a.Z)({title:"\u042d\u0446\u044d\u0433 /\u044d\u0445/-\u0438\u0439\u043d \u043d\u044d\u0440 ",dataIndex:"familyName",key:"familyName",width:150,visible:!0},J("familyName")),(0,a.Z)({title:"\u041d\u044d\u0440",dataIndex:"name",key:"name",width:150,visible:!0},J("name")),(0,a.Z)({title:"\u0418\u0440\u0433\u044d\u043d\u0448\u0438\u043b",dataIndex:"nationality",key:"nationality",width:150,visible:!0},J("nationality")),(0,a.Z)({title:"\u04ae\u043d\u0434\u044d\u0441 \u0443\u0433\u0441\u0430\u0430",dataIndex:"religion",key:"religion",width:150,visible:!0},J("religion")),(0,a.Z)({title:"\u0421\u0443\u0440\u0430\u043b\u0446\u0430\u0433\u0447\u0438\u0439\u043d \u043a\u043e\u0434",dataIndex:"studentCode",key:"studentCode",width:150,visible:!0},J("studentCode")),(0,a.Z)({title:"\u0421\u0430\u043b\u0431\u0430\u0440 \u0441\u0443\u0440\u0433\u0443\u0443\u043b\u044c",dataIndex:["school","name"],key:"school",width:200,visible:!0},J("school","name")),(0,a.Z)({title:"\u0425\u04e9\u0442\u04e9\u043b\u0431\u04e9\u0440",dataIndex:["program","program"],key:"program",width:100,visible:!0},J("program","program")),(0,a.Z)({title:"\u0410\u043d\u0433\u0438 \u0434\u0430\u043c\u0436\u0430\u0430",dataIndex:["classes","classes"],key:"classes",width:100,visible:!0},J("classes","classes")),(0,a.Z)({title:"\u0411\u04af\u043b\u044d\u0433",dataIndex:["section","section"],key:"section",width:100,visible:!0},J("section","section")),(0,a.Z)({title:"\u0422\u04e9\u0440\u0441\u04e9\u043d \u043e\u0433\u043d\u043e\u043e",dataIndex:"birthdate",key:"birthdate",width:150,visible:!0},J("birthdate")),(0,a.Z)({title:"\u0422\u04e9\u0440\u0441\u04e9\u043d \u0430\u0439\u043c\u0430\u0433 /\u0445\u043e\u0442/",dataIndex:["birthCity","name"],key:"birthCity",width:150,visible:!0},J("birthCity","name")),(0,a.Z)({title:"\u0422\u04e9\u0440\u0441\u04e9\u043d \u0441\u0443\u043c /\u0434\u04af\u04af\u0440\u044d\u0433/",dataIndex:["birthDistrict","name"],key:"birthDistrict",width:150,visible:!0},J("birthDistrict","name")),(0,a.Z)({title:"\u0418-\u043c\u044d\u0439\u043b",dataIndex:["user","email"],key:"email",width:100,visible:!0},J("user","email")),(0,a.Z)({title:"\u0423\u0442\u0430\u0441",dataIndex:"phone",key:"phone",width:100,visible:!0},J("phone")),(0,a.Z)({title:"\u0421\u0443\u0440\u0433\u0443\u0443\u043b\u044c\u0434 \u044d\u043b\u0441\u0441\u044d\u043d \u043e\u0433\u043d\u043e\u043e",dataIndex:["joinSchoolyear","schoolyear"],key:"email",width:150,visible:!0},J("joinSchoolyear","joinSchoolyear")),(0,a.Z)({title:"\u0421\u0443\u0440\u0430\u043b\u0446\u0430\u0433\u0447\u0438\u0439\u043d \u0442\u04e9\u043b\u04e9\u0432",dataIndex:["status","name"],key:"status",width:150,visible:!0},J("status","name")),(0,a.Z)({title:"\u0421\u0443\u0440\u0430\u043b\u0446\u0430\u0433\u0447\u0438\u0439\u043d \u043d\u044d\u043c\u044d\u043b\u0442 \u0442\u04e9\u043b\u04e9\u0432",dataIndex:["statusExtra","name"],key:"status",width:150,visible:!0},J("statusExtra","name"))]),W=(0,i.Z)(G,2),ee=W[0],ne=W[1];var te={edit:(0,S.C)("change_student"),destroy:(0,S.C)("delete_student"),password:(0,S.C)("change_user_password")};return(0,_.jsxs)("div",{className:"bg-white p-2",children:[(0,_.jsx)(P.Z,{ref:L,formName:"StudentForm",children:(0,_.jsx)(w.Z,{refetch:Q,formType:"edit",editData:z,setIsModalVisible:function(){L.current.handleCancel()}})}),(0,_.jsxs)("div",{className:"flex justify-end",children:[(0,_.jsx)("button",{className:"px-4 py-2 hover:bg-gray-50",onClick:function(){(new Z.i).addSheet("\u0421\u0443\u0440\u0430\u043b\u0446\u0430\u0433\u0447").addColumns(ee.filter((function(e){return e.visible}))).addDataSource(t).saveAs("\u0421\u0443\u0440\u0430\u043b\u0446\u0430\u0433\u0447.xlsx")},children:(0,_.jsx)(I.Z,{className:"h-5 w-5 text-mkp","aria-hidden":"true"})}),(0,_.jsxs)(k.v,{as:"div",className:"relative inline-block text-left",children:[(0,_.jsx)("div",{children:(0,_.jsx)(k.v.Button,{className:"inline-flex w-full justify-center rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:(0,_.jsx)(q.Z,{className:"h-5 w-5 text-mkp","aria-hidden":"true"})})}),(0,_.jsx)(D.u,{as:o.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,_.jsx)(k.v.Items,{className:"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:(0,_.jsx)("div",{className:"flex flex-col p-1",children:ee.map((function(e,n){return(0,_.jsx)(h.Z,{onChange:function(e){return function(e,n){var t=ee.slice();t[n].visible=e.target.checked,ne(t)}(e,n)},checked:e.visible,className:"ml-1",value:e.dataIndex,children:e.title},n)}))})})})]})]}),(0,_.jsx)(x.Z,{className:"mt-4",loading:O,columns:[].concat((0,s.Z)(ee.filter((function(e){return e.visible}))),[{key:"actions",title:(0,_.jsx)(v.Z,{id:"main.action"}),width:"15vw",dataIndex:"actions",render:function(e,n){return(0,_.jsxs)("div",{className:"text-center",children:[te.password&&(0,_.jsx)($.Z,{user:n.user.id}),!0===te.edit&&(0,_.jsxs)(m.Z,{size:"small",onClick:function(){return A(n),void L.current.handleOpen()},type:"text",icon:(0,_.jsx)(y.Z,{twoToneColor:"#ffdb00"}),children:[" ",(0,_.jsx)(v.Z,{id:"edit"})]}),!0===te.destroy&&(0,_.jsxs)(m.Z,{size:"small",onClick:function(){return e=n,void M({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){X({variables:{id:e.id}})}});var e},type:"text",icon:(0,_.jsx)(p.Z,{twoToneColor:"#f42f2f"}),children:[" ",(0,_.jsx)(v.Z,{id:"delete"})]})]})}}]),dataSource:null===K||void 0===K?void 0:K.allStudentsReport,rowKey:"id",bordered:!0,size:"small",onChange:function(e,n,t,s){d(s.currentDataSource)},pagination:{defaultPageSize:20},scroll:{x:2e3,y:500}})]})}},19545:function(e,n,t){var s=t(29439),r=t(72791),a=t(22949),i=t(73332),o=t(49389),d=t(50419),l=t(37083),u=t(66106),c=t(30914),m=t(11561),h=t(84376),x=t(96578),j=t(86586),y=t(41920),p=t(7378),Z=t(20077),f=t(82259),g=t(72426),b=t.n(g),v=t(82630),C=t(68694),k=t(80184);n.Z=function(e){var n=e.editData,t=e.formType,g=e.setIsModalVisible,D=e.refetch,I=a.Z.Option,q=i.Z.useForm(),S=(0,s.Z)(q,1)[0],$=o.Z.TextArea,w="YYYY-MM-DD",P=(0,h.D)(Z.vm,{onCompleted:function(e){D(),d.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),S.resetFields(),g(!1)}}),N=(0,s.Z)(P,2),_=N[0],M=N[1].loading,Y=(0,h.D)(f.x,{onCompleted:function(e){D(),d.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),g(!1)}}),F=(0,s.Z)(Y,2),R=F[0],T=F[1].loading,B=(0,x.a)(p.$5).data,E=(0,j.t)(C.FQ),z=(0,s.Z)(E,2),A=z[0],L=z[1].data,V=(0,x.a)(y.YP).data,K=(0,x.a)(y.$_).data,O=(0,x.a)(y.NC).data,Q=(0,x.a)(y.Fm).data,U=(0,x.a)(p.Ds).data,X=(0,x.a)(p.w9).data,H=(0,x.a)(y.gw).data,J=(0,x.a)(y.YV).data,G=(0,j.t)(C.gt),W=(0,s.Z)(G,2),ee=W[0],ne=W[1].data,te=(0,x.a)(y.nh).data;(0,r.useEffect)((function(){if("edit"===t){var e={username:n.user.username,email:n.user.email,studentCode:n.studentCode,surname:n.surname,familyName:n.familyName,name:n.name,religion:n.religion,registerNo:n.registerNo,nationality:n.nationality,state:n.state,phone:n.phone,address:n.address,citizen:n.citizen,activity:n.activity.id,sex:n.sex,classtime:n.classtime.id,birthCity:n.birthCity.id,birthDistrict:n.birthDistrict.id,status:n.status.id,statusExtra:n.statusExtra.id,school:n.school.id,classes:n.classes.id,section:n.section.id,program:n.program.id,joinSchoolyear:n.joinSchoolyear.id,joinDate:b()(n.joinDate),birthdate:b()(n.birthdate)};ie(e.birthCity),A({variables:{program:e.program,offset:1,limit:1,filter:""}}),me(e.program),Ze(b()(e.joinDate).format("YYYY-MM-DD")),ve(b()(e.birthdate).format("YYYY-MM-DD")),S.setFieldsValue(e)}else"create"===t&&S.resetFields()}),[A,S,n,t]);var se=(0,r.useState)(""),re=(0,s.Z)(se,2),ae=re[0],ie=re[1],oe=null,de=null;ae&&(oe=ae),oe&&(de=null===O||void 0===O?void 0:O.allDistricts.filter((function(e){return e.cityID.id===oe})).map((function(e){return(0,k.jsx)(I,{value:e.id,children:e.name},e.id)})));var le=(0,r.useState)(""),ue=(0,s.Z)(le,2),ce=ue[0],me=ue[1],he=null,xe=null;ce&&(he=ce),he&&(xe=null===L||void 0===L?void 0:L.allClassess.map((function(e){return(0,k.jsx)(I,{value:e.id,children:e.classes},e.id)})));var je=(0,r.useState)(""),ye=(0,s.Z)(je,2),pe=ye[0],Ze=ye[1],fe=(0,r.useState)(""),ge=(0,s.Z)(fe,2),be=ge[0],ve=ge[1],Ce=new RegExp(/^[7-9][0-9]{3}[0-9]{4}$/),ke=new RegExp(/[\u0401\u0410-\u042F\u04AE\u04E8]{2}([0-9]){8}$/);return(0,k.jsx)(l.Z,{spinning:M||T,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,k.jsx)(i.Z,{id:"StudentForm",layout:"vertical",form:S,name:"control-hooks",onFinish:function(e){"edit"===t?(e.joinDate=pe,e.birthdate=be,e.id=n.id,R({variables:e})):(e.joinDate=pe,e.birthdate=be,_({variables:e}))},size:"small",children:(0,k.jsxs)(u.Z,{gutter:[16,24],children:[(0,k.jsxs)(c.Z,{className:"gutter-row",span:12,children:[(0,k.jsx)(i.Z.Item,{name:"school",label:(0,k.jsx)(v.Z,{id:"school"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{children:null===Q||void 0===Q?void 0:Q.allSchools.map((function(e,n){return(0,k.jsx)(I,{value:e.id,children:e.name},n)}))})}),(0,k.jsx)(i.Z.Item,{name:"program",label:(0,k.jsx)(v.Z,{id:"program"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{onChange:function(e){A({variables:{program:e,offset:1,limit:1,filter:""}}),me(e)},children:null===V||void 0===V?void 0:V.allPrograms.map((function(e,n){return(0,k.jsx)(I,{value:e.id,children:e.program},n)}))})}),(0,k.jsx)(i.Z.Item,{name:"classes",label:(0,k.jsx)(v.Z,{id:"classes"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{onChange:function(e){return ee({variables:{classes:e}})},children:xe})}),(0,k.jsx)(i.Z.Item,{name:"section",label:(0,k.jsx)(v.Z,{id:"section"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{children:null===ne||void 0===ne?void 0:ne.sectionsByClasses.map((function(e,n){return(0,k.jsx)(I,{value:e.id,children:e.section},n)}))})}),(0,k.jsx)(i.Z.Item,{name:"studentCode",label:(0,k.jsx)(v.Z,{id:"studentCode"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(i.Z.Item,{name:"status",label:(0,k.jsx)(v.Z,{id:"status"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{children:null===U||void 0===U?void 0:U.allStudentStatuss.map((function(e,n){return(0,k.jsx)(I,{value:e.id,children:e.name},n)}))})}),(0,k.jsx)(i.Z.Item,{name:"statusExtra",label:(0,k.jsx)(v.Z,{id:"student-status-extra"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{children:null===X||void 0===X?void 0:X.allStudentStatusExtras.map((function(e,n){return(0,k.jsx)(I,{value:e.id,children:e.name},n)}))})}),(0,k.jsx)(i.Z.Item,{name:"joinDate",label:(0,k.jsx)(v.Z,{id:"joinDate"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(m.Z,{style:{width:"100%"},onChange:function(e){Ze(b()(e).format("YYYY-MM-DD"))},format:w})}),(0,k.jsx)(i.Z.Item,{name:"nationality",label:(0,k.jsx)(v.Z,{id:"nationality"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(i.Z.Item,{name:"phone",label:(0,k.jsx)(v.Z,{id:"parent_phone"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})},{validator:function(e,n){return Ce.test(n)?Promise.resolve():Promise.reject("\u0423\u0442\u0430\u0441\u043d\u044b \u0434\u0443\u0433\u0430\u0430\u0440 \u0431\u0443\u0440\u0443\u0443 \u0431\u0430\u0439\u043d\u0430!")}}],children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(i.Z.Item,{name:"state",label:(0,k.jsx)(v.Z,{id:"state"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(i.Z.Item,{name:"classtime",label:(0,k.jsx)(v.Z,{id:"classtime"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{children:null===J||void 0===J?void 0:J.allClasstimes.map((function(e,n){return(0,k.jsx)(I,{value:e.id,children:e.name},n)}))})}),(0,k.jsx)(i.Z.Item,{name:"address",label:(0,k.jsx)(v.Z,{id:"address"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)($,{rows:2})})]}),(0,k.jsxs)(c.Z,{className:"gutter-row",span:12,children:[(0,k.jsx)(i.Z.Item,{name:"religion",label:(0,k.jsx)(v.Z,{id:"religion"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(i.Z.Item,{name:"surname",label:(0,k.jsx)(v.Z,{id:"surname"}),rules:[{required:!0}],children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(i.Z.Item,{name:"familyName",label:(0,k.jsx)(v.Z,{id:"familyName"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(i.Z.Item,{name:"name",label:(0,k.jsx)(v.Z,{id:"name"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(i.Z.Item,{name:"registerNo",label:(0,k.jsx)(v.Z,{id:"registerNo"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})},{validator:function(e,n){return ke.test(n)?Promise.resolve():Promise.reject("\u0420\u0435\u0433\u0438\u0441\u0442\u0435\u0440\u0438\u0439\u043d \u0434\u0443\u0433\u0430\u0430\u0440 \u0431\u0443\u0440\u0443\u0443 \u0431\u0430\u0439\u043d\u0430!")}}],children:(0,k.jsx)(o.Z,{})}),(0,k.jsx)(i.Z.Item,{name:"birthdate",label:(0,k.jsx)(v.Z,{id:"birthdate"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(m.Z,{style:{width:"100%"},onChange:function(e){ve(b()(e).format("YYYY-MM-DD"))},format:w})}),(0,k.jsx)(i.Z.Item,{name:"sex",label:(0,k.jsx)(v.Z,{id:"sex"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsxs)(a.Z,{children:[(0,k.jsx)(I,{value:"\u042d\u0440\u044d\u0433\u0442\u044d\u0439",children:(0,k.jsx)(v.Z,{id:"sex.male"})},"0"),(0,k.jsx)(I,{value:"\u042d\u043c\u044d\u0433\u0442\u044d\u0439",children:(0,k.jsx)(v.Z,{id:"sex.female"})},"1")]})}),(0,k.jsx)(i.Z.Item,{name:"birthCity",label:(0,k.jsx)(v.Z,{id:"birthCity"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{onChange:function(e){ie(e)},children:null===K||void 0===K?void 0:K.allCitys.map((function(e,n){return(0,k.jsx)(I,{value:e.id,children:e.name},n)}))})}),(0,k.jsx)(i.Z.Item,{name:"birthDistrict",label:(0,k.jsx)(v.Z,{id:"birthDistrict"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{children:de})}),(0,k.jsx)(i.Z.Item,{name:"activity",label:(0,k.jsx)(v.Z,{id:"activity"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{children:null===B||void 0===B?void 0:B.allActivitys.map((function(e,n){return(0,k.jsx)(I,{value:e.id,children:e.name},n)}))})}),(0,k.jsx)(i.Z.Item,{name:"joinSchoolyear",label:(0,k.jsx)(v.Z,{id:"joinSchoolyear"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})}],children:(0,k.jsx)(a.Z,{children:null===te||void 0===te?void 0:te.allSchoolyears.map((function(e,n){return(0,k.jsxs)(I,{value:e.id,children:[e.schoolyear," ",e.season]},n)}))})}),(0,k.jsx)(i.Z.Item,{name:"username",label:(0,k.jsx)(v.Z,{id:"username"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})},{validator:function(e,s){return r=s,(null===H||void 0===H?void 0:H.allUsers.some((function(e){return("edit"!==t||n.user.username!==r)&&e.username===r})))?Promise.reject("\u041d\u044d\u0432\u0442\u0440\u044d\u0445 \u043d\u044d\u0440 \u0431\u04af\u0440\u0442\u0433\u044d\u043b\u0442\u044d\u0439 \u0431\u0430\u0439\u043d\u0430"):Promise.resolve();var r}}],children:(0,k.jsx)(o.Z,{})}),"create"===t&&(0,k.jsx)(i.Z.Item,{name:"password",label:(0,k.jsx)(v.Z,{id:"password"}),rules:[{required:!0,message:(0,k.jsx)(v.Z,{id:"form.required"})},{min:8,message:"\u041d\u0443\u0443\u0446 \u04af\u0433 8-\u0430\u0430\u0441 \u0443\u0440\u0442\u0442\u0430\u0439 \u0434\u044d\u044d\u0448 \u0431\u0430\u0439\u0445 \u0451\u0441\u0442\u043e\u0439"},function(e){var n=e.getFieldValue;return{validator:function(e,t){return t&&n("username")!==t?Promise.resolve():Promise.reject("\u041d\u044d\u0432\u0442\u0440\u044d\u0445 \u043d\u044d\u0440 \u043d\u0443\u0443\u0446 \u04af\u0433 \u0445\u043e\u0451\u0440 \u0438\u0436\u0438\u043b \u0431\u0430\u0439\u0445 \u0431\u043e\u043b\u043e\u043c\u0433\u04af\u0439!")}}}],children:(0,k.jsx)(o.Z.Password,{})})]})]})})})}}}]);
//# sourceMappingURL=5799.3d333213.chunk.js.map