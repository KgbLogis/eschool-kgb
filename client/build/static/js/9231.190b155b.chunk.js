"use strict";(self.webpackChunkmkp=self.webpackChunkmkp||[]).push([[9231],{74021:function(n,e,t){var a=t(29439),r=t(72791),s=t(66871),i=t(49389),o=t(87309),l=t(59432),d=t(11730),c=t(31549),u=t(82630),m=t(68470),f=t(80184);e.Z=function(n){var e=n.fetchData,t=n.loading,p=n.columns,h=n.data,y=n.permissions,g=n.showModal,$=(0,r.useState)(""),Z=(0,a.Z)($,2),j=(Z[0],Z[1]);return(0,f.jsxs)(s.Z,{children:[(0,f.jsxs)(m.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:[(0,f.jsx)(m.Z,{className:"mb-1",mobileFlex:!1,children:(0,f.jsx)("div",{className:"mr-md-3 mb-3",children:(0,f.jsx)(i.Z,{placeholder:"\u0425\u0430\u0439\u0445",prefix:(0,f.jsx)(d.Z,{}),onChange:function(n){return function(n){var t=n.currentTarget.value;e({variables:{offset:0,limit:10,filter:t,program:0}}),j(t)}(n)}})})}),!0===y.create&&(0,f.jsx)("div",{className:"mr-md-3 mb-3",children:(0,f.jsxs)(o.Z,{onClick:g,type:"primary",icon:(0,f.jsx)(c.Z,{}),block:!0,children:[" ",(0,f.jsx)(u.Z,{id:"add_new"})]})})]}),(0,f.jsx)("div",{className:"table-responsive",children:(0,f.jsx)(l.Z,{size:"small",columns:p,dataSource:h,rowKey:"id",bordered:!0,loading:t})})]})}},68470:function(n,e,t){t(72791);var a=t(80184),r=function(n){var e=n.children,t=n.className,r=n.alignItems,s=n.justifyContent,i=n.mobileFlex,o=n.flexDirection;return(0,a.jsx)("div",{className:"".concat(i?"d-flex":"d-md-flex"," ").concat(t," ").concat(o?"flex-"+o:""," ").concat(r?"align-items-"+r:""," ").concat(s?"justify-content-"+s:""),children:e})};r.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},e.Z=r},41920:function(n,e,t){t.d(e,{$_:function(){return z},Be:function(){return nn},Dp:function(){return W},Fm:function(){return H},J7:function(){return L},Ko:function(){return en},MA:function(){return Y},NC:function(){return O},O8:function(){return U},TW:function(){return N},Vr:function(){return F},YP:function(){return V},YV:function(){return J},gw:function(){return E},nS:function(){return K},nh:function(){return G},oj:function(){return T},pQ:function(){return _},q:function(){return tn},r1:function(){return X},tz:function(){return R},vh:function(){return Q},vp:function(){return w}});var a,r,s,i,o,l,d,c,u,m,f,p,h,y,g,$,Z,j,k,S,x,P,b,C,I,M,v,A,D,q=t(30168),B=t(27570),N=(0,B.Ps)(a||(a=(0,q.Z)(["\n    query allSubjects ($offset: Int!, $limit: Int!, $filter: String) {\n        allSubjects (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            school {\n                id\n                name\n            }\n            subSchool {\n                id\n                name\n            }\n            subject \n            credit\n            content\n            createUserid{\n                teacher{\n                    familyName\n                    name\n                }\n            }\n        }\n    }\n"]))),T=(0,B.Ps)(r||(r=(0,q.Z)(["\n    query allSubjectsPagination ($page: Int!, $perPage: Int!, $filter: String) {\n        allSubjectsPagination (page: $page, perPage: $perPage, filter: $filter) {\n            page\n            perPage\n            pageCount\n            totalCount\n            records {\n                id\n                school {\n                    id\n                    name\n                }\n                subSchool {\n                    id\n                    name\n                }\n                subject \n                credit\n                content\n                createUserid{\n                    teacher{\n                        familyName\n                        name\n                    }\n                }\n            }\n        }\n    }\n"]))),E=((0,B.Ps)(s||(s=(0,q.Z)(["\n    query allTeacherStatuss {\n        allTeacherStatuss {\n            id\n            name\n        }\n    }\n"]))),(0,B.Ps)(i||(i=(0,q.Z)(["\n    query allStudentStatuss {\n        allStudentStatuss {\n            id\n            name\n        }\n    }\n"]))),(0,B.Ps)(o||(o=(0,q.Z)(["\n    query allStudentStatusExtras {\n        allStudentStatusExtras {\n            id\n            name\n        }\n    }\n"]))),(0,B.Ps)(l||(l=(0,q.Z)(["\n    query allUsers {\n        allUsers {\n            id\n            username\n            email\n        }\n    }\n"])))),w=((0,B.Ps)(d||(d=(0,q.Z)(["\n    query userByUsername($username: String!) {\n        userByUsername(username: $username) {\n            id\n            username\n        }\n    }\n"]))),(0,B.Ps)(c||(c=(0,q.Z)(["\n    query employeesAttandanceByRange ($startDate: DateTime!, $endDate: DateTime!) {\n        employeesAttandanceByRange (startDate: $startDate, endDate: $endDate) {\n            id\n            isIn\n            isOut\n            timeIn\n            timeOut\n            user {\n                id\n                isTeacher\n                isEmployee\n                teacher {\n                    familyName\n                    name\n                    teacherCode\n                }\n                employee {\n                    familyName\n                    name\n                    employeeCode\n                }\n                groups {\n                    name\n                }\n            }\n        }\n    }\n"])))),Y=((0,B.Ps)(u||(u=(0,q.Z)(["\n    query allAttendaceEmployees {\n        allAttendaceEmployees {\n            username\n            email\n            isTeacher\n            isEmployee\n            teacher {\n                teacherCode\n                familyName\n                name\n            }\n            employee {\n                employeeCode\n                familyName\n                name\n            }\n        }\n    }\n"]))),(0,B.Ps)(m||(m=(0,q.Z)(["\n    query allEmployeesCompartment {\n        allEmployeesCompartment {\n            id\n            name\n        }\n    }\n"])))),F=(0,B.Ps)(f||(f=(0,q.Z)(["\n    query allEmployees ($filter: String) {\n        allEmployees (filter: $filter) {\n            id\n            user {\n                id\n                username\n                email\n                groups {\n                    name\n                }\n            }\n            compartment {\n                id\n                name\n            }\n            employeeCode\n            familyName\n            name\n            registerNo\n            photo\n            phone\n            phone2\n            address\n            sex\n            birthdate\n            birthCity {\n                id\n            }\n            birthDistrict {\n                id\n            }\n            status {\n                id\n            }\n        }\n    }\n"]))),_=(0,B.Ps)(p||(p=(0,q.Z)(["\n  \tquery allTeachers ($offset: Int!, $limit: Int!, $filter: String) {\n        allTeachers (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            user {\n                id\n                username\n                email\n            }\n            teacherCode\n            degree{\n                id\n            }\n            access\n            familyName\n            name\n            registerNo\n            photo\n            phone\n            phone2\n            address\n            joinDate\n            joinBefore\n            sex\n            birthdate\n            birthCity {\n                id\n                name\n            }\n            birthDistrict {\n                id\n                name\n            }\n            status {\n                id\n                name\n            }\n            school {\n                id\n                name\n            }\n            subSchool {\n                id\n                name\n            }\n        }\n\t}\n"]))),R=(0,B.Ps)(h||(h=(0,q.Z)(["\n  \tquery allStudents ($filter: String, $program: Int, $classes: Int, $section: Int) {\n        allStudents (filter: $filter, program: $program, classes: $classes, section: $section) {\n            id\n            user {\n                id\n                username\n                email\n            }\n            studentCode\n            surname\n            familyName\n            name\n            religion\n            registerNo\n            nationality\n            state\n            photo\n            phone\n            address\n            activity {\n                id\n                name\n            }\n            joinDate\n            sex\n            birthdate\n            classtime {\n                id\n                name\n            }\n            birthCity {\n                id\n                name\n            }\n            birthDistrict {\n                id\n                name\n            }\n            status {\n                id\n                name\n            }\n            statusExtra {\n                id\n                name\n            }\n            school {\n                id\n                name\n            }\n            classes {\n                id\n                classes\n            }\n            section {\n                id\n                section\n            }\n            program {\n                id\n                program\n            }\n            joinSchoolyear {\n                id\n                schoolyear\n            }\n        }\n    }\n"]))),z=(0,B.Ps)(y||(y=(0,q.Z)(["\n  \tquery allCitys{\n        allCitys {\n            id\n            name\n            code\n        }\n\t}\n"]))),O=(0,B.Ps)(g||(g=(0,q.Z)(["\n    query allDistricts {\n        allDistricts {\n            id\n            code\n            name\n            cityID {\n                id\n                name\n            }\n        }\n    }\n"]))),V=(0,B.Ps)($||($=(0,q.Z)(["\n  \tquery allPrograms{\n        allPrograms {\n            id\n            program\n            programMgl\n            maxStudentNum\n            school {\n                id\n                name\n            }\n            subSchool {\n                id\n                name\n            }\n            status\n            createdAt\n            updatedAt\n        }\n\t  }\n"]))),H=(0,B.Ps)(Z||(Z=(0,q.Z)(["\n  \tquery allSchools {\n        allSchools {\n            id\n            name\n            nameMgl\n        }\n\t}\n"]))),U=(0,B.Ps)(j||(j=(0,q.Z)(["\n  \tquery allSubSchools{\n        allSubSchools {\n            id\n            name\n            nameMgl\n            school {\n                id\n                name\n            }\n\t\t}\n\t}\n"]))),L=(0,B.Ps)(k||(k=(0,q.Z)(["\n    query allSections {\n        allSections {\n            id\n            section\n            classes {\n                id\n                classes\n            }\n            program {\n                id\n                program\n            }\n            teacher{\n                id\n            }\n            program {\n                id\n                program\n            }\n            school {\n                id\n                name\n            }\n            createdAt\n            updatedAt\n        }\n    }\n"]))),X=(0,B.Ps)(S||(S=(0,q.Z)(["\n    query allClassess ($program: Int!, $offset: Int!, $limit: Int!, $filter: String) {\n        allClassess (program: $program, offset: $offset, limit: $limit, filter: $filter) {\n            id\n            classes\n            activity {\n                id\n                name\n            }\n            program {\n                id\n                program\n            }\n            school {\n                id\n                name\n            }\n            status\n        }\n    }\n"]))),J=(0,B.Ps)(x||(x=(0,q.Z)(["\n    query allClasstimes {\n        allClasstimes {\n            id\n            name\n        }\n    }\n"]))),G=(0,B.Ps)(P||(P=(0,q.Z)(["\n    query allSchoolyears {\n        allSchoolyears {\n            id\n            schoolyear\n        }\n    }\n"]))),K=(0,B.Ps)(b||(b=(0,q.Z)(["\n    query allParents ($offset: Int!, $limit: Int!, $filter: String) {\n        allParents (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            familyName\n            name\n            profession\n            phone\n            address\n            student {\n                id\n                studentCode\n                familyName\n                name\n            }\n        }\n    }\n"]))),Q=(0,B.Ps)(C||(C=(0,q.Z)(["\n    query sectionsByClasses ($classes: Int!) {\n        sectionsByClasses (classes: $classes) {\n            id\n            section\n            maxStudentNum\n            teacher{\n                name\n                id\n            }\n            classes {\n                id\n                classes\n            }\n            program {\n                id\n                program\n            }\n            school {\n                id\n                name\n            }\n        }\n    }\n"]))),W=(0,B.Ps)(I||(I=(0,q.Z)(["\n    query transfersByStudent ($student: Int!) {\n        transfersByStudent (student: $student) {\n            id\n            student {\n                familyName\n                name\n                photo\n                studentCode\n            }\n            school {\n                id\n                name\n            }\n            program {\n                id\n                program\n            }\n            classes {\n                id\n                classes\n            }\n            section {\n                id\n                section\n            }\n            status {\n                id\n                name\n            }\n            statusExtra {\n                id\n                name\n            }\n            classtime {\n                id\n                name\n            }\n            activity {\n                id\n                name\n            }\n            docDate\n            docNum\n            description\n            oldData\n        }\n    }\n"]))),nn=(0,B.Ps)(M||(M=(0,q.Z)(["\n    query allEventTypes {\n        allEventTypes {\n            id\n            name\n            color\n        }\n    }\n"]))),en=(0,B.Ps)(v||(v=(0,q.Z)(["\n    query allEvents {\n        allEvents {\n            id\n            title\n            description\n            content\n            startAt\n            endAt\n            eventType {\n                id\n                name\n                color\n            }\n        }\n    } \n"]))),tn=(0,B.Ps)(A||(A=(0,q.Z)(["\n    query allEventsByDate ($date: Date) {\n        allEventsByDate (date: $date) {\n            id\n            title\n            description\n            content\n            startAt\n            endAt\n            eventType {\n                id\n                name\n                color\n            }\n        }\n    } \n"])));(0,B.Ps)(D||(D=(0,q.Z)(["\n    query allEventsByType ($id: Int!) {\n        allEventsByType (id: $id) {\n            id\n            title\n            description\n            content\n            startAt\n            endAt\n            eventType\n        }\n    }\n"])))},68120:function(n,e,t){t.d(e,{$h:function(){return E},H1:function(){return M},L8:function(){return P},S8:function(){return Y},Xc:function(){return q},_W:function(){return D},d3:function(){return A},d6:function(){return B},ey:function(){return w},fJ:function(){return b},iF:function(){return T},kk:function(){return I},sF:function(){return F},ux:function(){return N},yC:function(){return v},zX:function(){return C}});var a,r,s,i,o,l,d,c,u,m,f,p,h,y,g,$,Z,j,k,S=t(30168),x=t(27570),P=(0,x.Ps)(a||(a=(0,S.Z)(["\n    query allMarks ($markBoard: Int!) {\n        allMarks (markBoard: $markBoard) {\n            id\n            student {\n                id\n                familyName\n                name\n                studentCode\n            }\n            markRelSet {\n                markVal\n                markSetting {\n                    id\n                    name\n                }\n            }\n            markBoard {\n                subject {\n                    subject\n                }\n            }\n        }\n    }\n"]))),b=(0,x.Ps)(r||(r=(0,S.Z)(["\n    mutation createMark ($section: Int, $studentCode: String, $markBoard: Int) {\n        createMark (section: $section, studentCode: $studentCode, markBoard: $markBoard) {\n            mark {\n                id\n            }\n        }\n    }\n"]))),C=(0,x.Ps)(s||(s=(0,S.Z)(["\n    mutation deleteMark ($id: ID) {\n        deleteMark (id: $id) {\n            mark {\n                student {\n                    id\n                }\n            }\n        }\n    }\n"]))),I=(0,x.Ps)(i||(i=(0,S.Z)(["\n    mutation createMarkRel ($mark: Int, $markSetting: Int, $markVal: String) {\n        createMarkRel (mark: $mark, markSetting: $markSetting, markVal: $markVal) {\n            markRel {\n                id\n                markVal\n                markSetting {\n                    id\n                    name\n                }\n            }\n        }\n    }\n"]))),M=((0,x.Ps)(o||(o=(0,S.Z)(["\n    query allMarkRels ($mark: Int!) {\n        allMarkRels (mark: $mark) {\n            mark {\n                student {\n                    id\n                    studentCode\n                }\n            }\n            markSetting {\n                name\n                percentage\n            }\n            markVal\n        }\n    }\n"]))),(0,x.Ps)(l||(l=(0,S.Z)(["\n    query allMarkPercentages {\n        allMarkPercentages {\n            id\n            type\n            percentage\n            diam\n        }\n    }\n"])))),v=(0,x.Ps)(d||(d=(0,S.Z)(["\n    mutation createMarkPercentage ($diam: String, $percentage: Int, $type: String) {\n        createMarkPercentage (diam: $diam, percentage: $percentage, type: $type) {\n            markPercentage {\n                type\n            }\n        }\n    }\n"]))),A=(0,x.Ps)(c||(c=(0,S.Z)(["\n    mutation updateMarkPercentage ($diam: String, $percentage: Int, $type: String, $id: ID) {\n        updateMarkPercentage (diam: $diam, percentage: $percentage, type: $type, id: $id) {\n            markPercentage {\n                type\n            }\n        }\n    }\n"]))),D=(0,x.Ps)(u||(u=(0,S.Z)(["\n    mutation deleteMarkPercentage ($id: ID) {\n        deleteMarkPercentage (id: $id) {\n            markPercentage {\n                type\n            }\n        }\n    }\n"]))),q=((0,x.Ps)(m||(m=(0,S.Z)(["\n    query markBoardById ($id: Int!) {\n        markBoardById (id: $id) {\n            id\n            schoolyear {\n                id\n                schoolyear\n            }\n            subject {\n                id\n                subject\n            }\n            teacher {\n                id\n                name\n            }\n            startAt \n            endAt\n            status\n            createdAt\n            updatedAt\n        }\n    }\n"]))),(0,x.Ps)(f||(f=(0,S.Z)(['\n    query allMarkBoards ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "mark", modelName: "Mark_board", filter: $filter) {\n            count\n        }\n        allMarkBoards (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            schoolyear {\n                id\n                schoolyear\n            }\n            subject {\n                id\n                subject\n            }\n            teacher {\n                id\n                name\n            }\n            startAt \n            endAt\n            status\n            createdAt\n            updatedAt\n        }\n    }\n'])))),B=((0,x.Ps)(p||(p=(0,S.Z)(["\n    mutation createMarkBoardFromRoutine ($endAt: String, $routine: Int, $startAt: String, $status: String) {\n        createMarkBoardFromRoutine (endAt: $endAt, routine: $routine, startAt: $startAt, status: $status) {\n            markBoard {\n                id\n            }\n        }\n    }\n"]))),(0,x.Ps)(h||(h=(0,S.Z)(["\n    mutation createMarkBoard ($endAt: String, $schoolyear: Int, $startAt: String, $status: String, $subject: Int, $teacher: Int) {\n        createMarkBoard (endAt: $endAt, schoolyear: $schoolyear, startAt: $startAt, status: $status, subject: $subject, teacher: $teacher) {\n            markBoard {\n                id\n            }\n        }\n    }\n"])))),N=(0,x.Ps)(y||(y=(0,S.Z)(["\n    mutation updateMarkBoard ($endAt: String, $schoolyear: Int, $startAt: String, $status: String, $subject: Int, $teacher: Int, $id: ID) {\n        updateMarkBoard (endAt: $endAt, schoolyear: $schoolyear, startAt: $startAt, status: $status, subject: $subject, teacher: $teacher, id: $id) {\n            markBoard {\n                id\n            }\n        }\n    }\n"]))),T=(0,x.Ps)(g||(g=(0,S.Z)(["\n    mutation deleteMarkBoard ($id: ID) {\n        deleteMarkBoard (id: $id) {\n            markBoard {\n                startAt\n            }\n        }\n    }\n"]))),E=(0,x.Ps)($||($=(0,S.Z)(["\n    query allMarkSettings {\n        allMarkSettings {\n            id\n            name\n            percentage\n            createdAt\n            updatedAt\n        }\n    }\n"]))),w=(0,x.Ps)(Z||(Z=(0,S.Z)(["\n    mutation createMarkSetting ($name: String, $percentage: Int) {\n        createMarkSetting (name: $name, percentage: $percentage) {\n            markSetting {\n                id\n            }\n        }\n    }\n"]))),Y=(0,x.Ps)(j||(j=(0,S.Z)(["\n    mutation updateMarkSetting ($name: String, $percentage: Int, $id: ID) {\n        updateMarkSetting (name: $name, percentage: $percentage, id: $id) {\n            markSetting {\n                id\n            }\n        }\n    }\n"]))),F=(0,x.Ps)(k||(k=(0,S.Z)(["\n    mutation deleteMarkSetting($id: ID) {\n        deleteMarkSetting (id: $id) {\n            markSetting {\n                name\n            }\n        }\n    }\n"])))},68694:function(n,e,t){t.d(e,{Cm:function(){return y},Cx:function(){return p},FQ:function(){return h},JX:function(){return f},Z2:function(){return j},dT:function(){return g},gt:function(){return Z},tL:function(){return $}});var a,r,s,i,o,l,d,c,u=t(30168),m=t(27570),f=(0,m.Ps)(a||(a=(0,u.Z)(["\n    query allStudents ($filter: String) {\n        allStudents (filter: $filter) {\n            id\n            familyName\n            name\n            studentCode\n        }\n\t}\n"]))),p=(0,m.Ps)(r||(r=(0,u.Z)(["\n    query allTeachers ($filter: String) {\n        allTeachers (filter: $filter) {\n            id\n            familyName\n            name\n            teacherCode\n        }\n    }\n"]))),h=(0,m.Ps)(s||(s=(0,u.Z)(["\n    query allClassess ($filter: String, $program: Int) {\n        allClassess (filter: $filter, program: $program) {\n            id\n            classes\n        }\n\t}\n"]))),y=(0,m.Ps)(i||(i=(0,u.Z)(['\n    query allSubjects ($offset: Int!, $limit: Int!, $filter: String) {\n        count (appName: "subject", modelName: "Subject", filter: $filter) {\n            count\n        }\n        allSubjects (offset: $offset, limit: $limit, filter: $filter) {\n            id\n            subject\n            content\n            createUserid {\n                firstName\n                lastName\n            }\n        }\n    }\n']))),g=(0,m.Ps)(o||(o=(0,u.Z)(["\n    query selectProgram {\n        allPrograms {\n            id\n            program\n        }\n    }\n"]))),$=(0,m.Ps)(l||(l=(0,u.Z)(["\n    query sectionsByProgram ($program: Int!) {\n        sectionsByProgram (program: $program) {\n            id\n            section \n            classes {\n                classes\n            }\n        }\n    }\n"]))),Z=(0,m.Ps)(d||(d=(0,u.Z)(["\n    query sectionsByClasses ($classes: Int!){\n        sectionsByClasses (classes: $classes) {\n            id \n            section\n        }\n    }\n"]))),j=(0,m.Ps)(c||(c=(0,u.Z)(['\n    query allStudentsPagination (\n        $page: Int\n        $perPage: Int\n        $filter: String = ""\n    ) {\n        allStudentsPagination (\n            page: $page\n            perPage: $perPage\n            filter: $filter\n        ) {\n            page\n            perPage\n            pageCount\n            totalCount\n            records {\n                id\n                name\n                familyName\n            }\n        }\n    }\n'])))},89231:function(n,e,t){t.r(e),t.d(e,{default:function(){return E}});var a=t(72791),r=t(29439),s=t(20003),i=t(50419),o=t(87309),l=t(77154),d=t(36795),c=t(82464),u=t(2703),m=t(73332),f=t(22949),p=t(11561),h=t(37083),y=t(66106),g=t(30914),$=t(69421),Z=t(84376),j=t(96578),k=t(86586),S=t(41920),x=t(68120),P=t(72426),b=t.n(P),C=t(82630),I=t(68694),M=t(38937),v=t(80184);var A=function(n){var e=n.formType,t=n.editData,s=n.setIsModalVisible,o=n.refetch,l=m.Z.useForm(),d=(0,r.Z)(l,1)[0],c=f.Z.Option,u=p.Z.RangePicker,P=(0,Z.D)(x.d6,{onCompleted:function(n){o(),i.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),s(!1)}}),A=(0,r.Z)(P,2),D=A[0],q=A[1].loading,B=(0,Z.D)(x.ux,{onCompleted:function(n){o(),i.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),s(!1)}}),N=(0,r.Z)(B,2),T=N[0],E=N[1].loading,w=(0,j.a)(S.nh,{}).data,Y=(0,a.useState)([]),F=(0,r.Z)(Y,2),_=F[0],R=F[1],z=(0,k.t)(I.Cx,{onCompleted:function(n){R(n.allTeachers)}}),O=(0,r.Z)(z,2),V=O[0],H=O[1].loading,U=(0,a.useState)([]),L=(0,r.Z)(U,2),X=L[0],J=L[1],G=(0,k.t)(I.Cm,{onCompleted:function(n){J(n.allSubjects)}}),K=(0,r.Z)(G,2),Q=K[0],W=K[1].loading;return(0,a.useEffect)((function(){if("edit"===e){var n={date:[b()(t.startAt),b()(t.endAt)],schoolyear:t.schoolyear.id,subject:t.subject.id,teacher:t.teacher.id,status:t.status};V({variables:{offset:0,limit:99999999,filter:t.teacher.name}}),Q({variables:{offset:0,limit:99999999,filter:t.subject.subject}}),d.setFieldsValue(n)}else"create"===e&&d.resetFields()}),[t,V,Q,d,e]),(0,v.jsx)(h.Z,{spinning:q||E,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,v.jsx)(m.Z,{id:"MarkBoardForm",layout:"vertical",form:d,name:"control-hooks",onFinish:function(n){"create"===e?(n.date.map((function(e,t){return 0===t?n.startAt=b()(e).format("YYYY-MM-DD HH:mm:ss"):n.endAt=b()(e).format("YYYY-MM-DD HH:mm:ss"),null})),n.hasOwnProperty("endAt")&&D({variables:n})):(n.id=t.id,n.date.map((function(e,t){return 0===t?n.startAt=b()(e).format("YYYY-MM-DD HH:mm:ss"):n.endAt=b()(e).format("YYYY-MM-DD HH:mm:ss"),null})),n.hasOwnProperty("endAt")&&T({variables:n}))},children:(0,v.jsxs)(y.Z,{gutter:[16,16],children:[(0,v.jsxs)(g.Z,{span:12,children:[(0,v.jsx)(m.Z.Item,{name:"schoolyear",label:(0,v.jsx)(C.Z,{id:"schoolyear"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,v.jsx)(f.Z,{children:null===w||void 0===w?void 0:w.allSchoolyears.map((function(n,e){return(0,v.jsxs)(c,{value:n.id,children:[n.schoolyear," / ",n.season," "]},e)}))})}),(0,v.jsx)(m.Z.Item,{name:"teacher",label:(0,v.jsx)(C.Z,{id:"teacher"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,v.jsx)(f.Z,{showSearch:!0,filterOption:!1,notFoundContent:H?(0,v.jsx)(M.Z,{cover:"content"}):(0,v.jsx)($.Z,{image:$.Z.PRESENTED_IMAGE_SIMPLE}),onSearch:function(n){""===n?R([]):V({variables:{offset:0,limit:99999999,filter:n}})},children:_.map((function(n,e){return(0,v.jsxs)(c,{value:n.id,children:[n.familyName," ",n.name," / ",n.teacherCode," "]},e)}))})}),(0,v.jsx)(m.Z.Item,{name:"date",label:(0,v.jsx)(C.Z,{id:"date"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,v.jsx)(u,{showTime:!0,placeholder:["\u042d\u0445\u043b\u044d\u0445 \u0445\u0443\u0433\u0430\u0446\u0430\u0430","\u0414\u0443\u0443\u0441\u0430\u0445 \u0445\u0443\u0433\u0430\u0446\u0430\u0430"]})})]}),(0,v.jsxs)(g.Z,{span:12,children:[(0,v.jsx)(m.Z.Item,{name:"subject",label:(0,v.jsx)(C.Z,{id:"subject"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,v.jsx)(f.Z,{showSearch:!0,filterOption:!1,notFoundContent:W?(0,v.jsx)(M.Z,{cover:"content"}):(0,v.jsx)($.Z,{image:$.Z.PRESENTED_IMAGE_SIMPLE}),onSearch:function(n){""===n?J([]):Q({variables:{offset:0,limit:99999999,filter:n}})},children:X.map((function(n,e){return(0,v.jsxs)(c,{value:n.id,children:[" ",n.subject]},e)}))})}),(0,v.jsx)(m.Z.Item,{name:"status",label:(0,v.jsx)(C.Z,{id:"status"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,v.jsxs)(f.Z,{children:[(0,v.jsx)(c,{value:"OPEN",children:(0,v.jsx)(C.Z,{id:"status.open"})},0),(0,v.jsx)(c,{value:"CLOSED",children:(0,v.jsx)(C.Z,{id:"status.closed"})},1)]})})]})]})})})},D=t(64880),q=t(59305),B=t(74021);var N=function(n){var e=(0,a.useState)([]),t=(0,r.Z)(e,2),m=t[0],f=t[1],p=(0,a.useState)(1),h=(0,r.Z)(p,2),y=h[0],g=h[1],$=(0,k.t)(x.Xc,{fetchPolicy:"network-only",onCompleted:function(n){g(n.count.count),f(n.allMarkBoards)}}),j=(0,r.Z)($,2),S=j[0],P=j[1],I=P.loading,M=P.refetch,N=(0,D.k6)();(0,a.useEffect)((function(){S({variables:{offset:0,limit:10,filter:""}})}),[S]);var T=(0,a.useState)(!1),E=(0,r.Z)(T,2),w=E[0],Y=E[1],F=(0,a.useState)([]),_=(0,r.Z)(F,2),R=_[0],z=_[1],O=(0,a.useState)(""),V=(0,r.Z)(O,2),H=V[0],U=V[1],L=s.Z.confirm,X=(0,Z.D)(x.iF,{onCompleted:function(n){M(),i.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),J=(0,r.Z)(X,1)[0],G=[{key:"schoolyear",title:(0,v.jsx)(C.Z,{id:"schoolyear"}),dataIndex:["schoolyear","schoolyear"],sorter:function(n,e){return u.ZP.antdTableSorter(n,e,"schoolyear")}},{key:"subject",title:(0,v.jsx)(C.Z,{id:"subject"}),dataIndex:["subject","subject"],sorter:function(n,e){return u.ZP.antdTableSorter(n,e,"subject")}},{key:"teacher",title:(0,v.jsx)(C.Z,{id:"teacher"}),dataIndex:["teacher","name"],sorter:function(n,e){return u.ZP.antdTableSorter(n,e,"teacher")}},{title:(0,v.jsx)(C.Z,{id:"start_end_date"}),children:[{key:"startAt",title:(0,v.jsx)(C.Z,{id:"startAt"}),dataIndex:"startAt",render:function(n){return b()(n).format("YYYY-MM-DD")},sorter:function(n,e){return u.ZP.antdTableSorter(n,e,"startAt")}},{key:"endAt",title:(0,v.jsx)(C.Z,{id:"endAt"}),dataIndex:"endAt",render:function(n){return b()(n).format("YYYY-MM-DD")},sorter:function(n,e){return u.ZP.antdTableSorter(n,e,"endAt")}}]},{key:"actions",title:(0,v.jsx)(C.Z,{id:"main.action"}),width:"20vw",dataIndex:"actions",render:function(e,t){return(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsxs)(o.Z,{size:"small",type:"text",onClick:function(){return N.push({pathname:q.sH+"/mark",state:{markBoard:t}})},children:[(0,v.jsx)(l.Z,{}),(0,v.jsxs)("span",{className:"ml-2",children:[" ",(0,v.jsx)(C.Z,{id:"show"})]})]},"0"),!0===n.permissions.edit&&(0,v.jsxs)(o.Z,{size:"small",type:"text",onClick:function(){return function(n){U("edit"),z(n),Y(!0)}(t)},children:[(0,v.jsx)(d.Z,{twoToneColor:"#ffdb00"}),(0,v.jsxs)("span",{className:"ml-2",children:[" ",(0,v.jsx)(C.Z,{id:"edit"})]})]},"2"),!0===n.permissions.destroy&&(0,v.jsxs)(o.Z,{size:"small",type:"text",onClick:function(){return function(n){L({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){J({variables:{id:n.id}})}})}(t)},children:[(0,v.jsx)(c.Z,{twoToneColor:"#f42f2f"}),(0,v.jsxs)("span",{className:"ml-2",children:[" ",(0,v.jsx)(C.Z,{id:"delete"})]})]},"3")]})}}];return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(s.Z,{title:"create"===H?(0,v.jsx)(C.Z,{id:"add_new"}):(0,v.jsx)(C.Z,{id:"edit"}),visible:w,okText:(0,v.jsx)(C.Z,{id:"main.okText"}),cancelText:(0,v.jsx)(C.Z,{id:"main.cancelText"}),width:"80vw",onCancel:function(){Y(!1)},okButtonProps:{form:"MarkBoardForm",key:"submit",htmlType:"submit"},children:(0,v.jsx)(A,{refetch:M,editData:R,formType:H,setIsModalVisible:Y})}),(0,v.jsx)(B.Z,{fetchData:S,loading:I,columns:G,data:m,count:y,permissions:n.permissions,showModal:function(){U("create"),Y(!0)}})]})},T=t(59288),E=function(n){var e={create:(0,T.C)("add_mark_board"),edit:(0,T.C)("change_mark_board"),destroy:(0,T.C)("delete_mark_board")};return Object.values(e).indexOf("loading")>-1?(0,v.jsx)(M.Z,{cover:"content"}):(0,v.jsx)(N,{title:n.title,permissions:e})}},77154:function(n,e,t){t.d(e,{Z:function(){return l}});var a=t(1413),r=t(72791),s={icon:function(n,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M81.8 537.8a60.3 60.3 0 010-51.5C176.6 286.5 319.8 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c-192.1 0-335.4-100.5-430.2-300.2z",fill:e}},{tag:"path",attrs:{d:"M512 258c-161.3 0-279.4 81.8-362.7 254C232.6 684.2 350.7 766 512 766c161.4 0 279.5-81.8 362.7-254C791.4 339.8 673.3 258 512 258zm-4 430c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z",fill:e}},{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258s279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766z",fill:n}},{tag:"path",attrs:{d:"M508 336c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z",fill:n}}]}},name:"eye",theme:"twotone"},i=t(8711),o=function(n,e){return r.createElement(i.Z,(0,a.Z)((0,a.Z)({},n),{},{ref:e,icon:s}))};o.displayName="EyeTwoTone";var l=r.forwardRef(o)}}]);
//# sourceMappingURL=9231.190b155b.chunk.js.map