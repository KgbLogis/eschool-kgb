"use strict";(self.webpackChunkemind=self.webpackChunkemind||[]).push([[5174],{68470:function(e,n,i){i(72791);var t=i(80184),o=function(e){var n=e.children,i=e.className,o=e.alignItems,a=e.justifyContent,r=e.mobileFlex,d=e.flexDirection;return(0,t.jsx)("div",{className:"".concat(r?"d-flex":"d-md-flex"," ").concat(i," ").concat(d?"flex-"+d:""," ").concat(o?"align-items-"+o:""," ").concat(a?"justify-content-"+a:""),children:n})};o.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},n.Z=o},60083:function(e,n,i){i.d(n,{L$:function(){return I},Re:function(){return C},Wc:function(){return T},bO:function(){return S},ec:function(){return w},ou:function(){return z},p5:function(){return N},qW:function(){return q},rc:function(){return D},tx:function(){return F},vj:function(){return P},wz:function(){return b},xW:function(){return M},yW:function(){return $},z4:function(){return k}});var t,o,a,r,d,s,l,c,u,m,f,g,x,Z,p,h,v,j=i(30168),y=i(27570),M=(0,y.Ps)(t||(t=(0,j.Z)(["\n    query allFoodMenus ($filter: String) {\n        allFoodMenus (filter: $filter){\n            id\n            program {\n                id\n                program\n            }\n            name \n        }\n    }\n"]))),F=(0,y.Ps)(o||(o=(0,j.Z)(["\n    mutation createFoodMenu ($name: String, $program: ID){\n        createFoodMenu(name: $name, program: $program){\n            foodMenu{\n                id\n            }\n        }\n    }\n\n"]))),$=(0,y.Ps)(a||(a=(0,j.Z)(["\n    mutation updateFoodMenu ($id: ID, $name: String, $program: ID){\n        updateFoodMenu (id: $id, name: $name, program: $program){\n            foodMenu{\n                id\n            }\n        }\n    }\n"]))),b=(0,y.Ps)(r||(r=(0,j.Z)(["\n    mutation deleteFoodMenu ($id: ID){\n        deleteFoodMenu (id: $id){\n            foodMenu{\n                name\n            }\n        }\n    }\n"]))),D=(0,y.Ps)(d||(d=(0,j.Z)(["\n    query allFoods ($foodMenu: ID!) {\n        allFoods (foodMenu: $foodMenu){\n            id\n            name\n            ingredients\n        }\n    }\n"]))),w=(0,y.Ps)(s||(s=(0,j.Z)(["\n    mutation createFood ($foodMenu: ID, $ingredients: String, $name: String){\n        createFood (foodMenu: $foodMenu, ingredients: $ingredients, name: $name) {\n            food {\n                id\n            }\n        }\n    }\n"]))),I=(0,y.Ps)(l||(l=(0,j.Z)(["\n    mutation updateFood ($foodMenu: ID, $id: ID, $ingredients: String, $name: String){\n        updateFood (foodMenu: $foodMenu, id: $id, ingredients: $ingredients, name: $name){\n            food {\n                id\n            }\n        }\n    }\n"]))),P=(0,y.Ps)(c||(c=(0,j.Z)(["\n    mutation deleteFood ($id: ID){\n        deleteFood (id: $id){\n            food {\n                name\n            }\n        }\n    }\n"]))),T=(0,y.Ps)(u||(u=(0,j.Z)(["\n    query allDailyMenus {\n        allDailyMenus {\n            id\n            program {\n                program\n            }\n            name\n            createdAt\n        }\n    }\n"]))),k=(0,y.Ps)(m||(m=(0,j.Z)(["\n    mutation createDailyMenu ($name: String, $program: ID) {\n        createDailyMenu (name: $name, program: $program) {\n            dailyMenu {\n                id\n            }\n        }\n    }\n"]))),C=(0,y.Ps)(f||(f=(0,j.Z)(["\n    mutation deleteDailyMenu ($id: ID){\n        deleteDailyMenu (id: $id){\n            dailyMenu {\n                name\n            }\n        }\n    }\n"]))),z=(0,y.Ps)(g||(g=(0,j.Z)(["\n    query allDailyMenuFoods ($dailyMenu: ID!){\n        allDailyMenuFoods (dailyMenu: $dailyMenu){\n            id\n            food {\n                name\n                ingredients\n                foodfileSet {\n                    image\n                }\n            }\n        }\n    }\n"]))),S=((0,y.Ps)(x||(x=(0,j.Z)(["\n    query foodById ($id: ID!){\n        foodById (id: $id){\n            id\n        }\n    }\n"]))),(0,y.Ps)(Z||(Z=(0,j.Z)(["\n    query allFoodFilesByFood ($food: ID!){\n        allFoodFilesByFood (food: $food){\n            id\n            image\n        }\n    }\n"])))),N=(0,y.Ps)(p||(p=(0,j.Z)(["\n    mutation createFoodFile ($food: ID, $image: Upload!){\n        createFoodFile (food: $food, image: $image){\n            foodFile {\n                id\n            }\n        }\n    }\n"]))),q=((0,y.Ps)(h||(h=(0,j.Z)(["\n    mutation deleteFoodFile ($id: ID){\n        deleteFoodFile (id: $id){\n            foodFile {\n                image\n            }\n        }\n    }\n"]))),(0,y.Ps)(v||(v=(0,j.Z)(["\n    mutation createDailyMenuFood ($dailyMenu: ID, $food: ID) {\n        createDailyMenuFood (dailyMenu: $dailyMenu, food: $food) {\n            dailyMenuFood {\n                id\n            }\n        }\n    }\n"]))))},95174:function(e,n,i){i.r(n),i.d(n,{default:function(){return U}});var t=i(72791),o=i(29439),a=i(20003),r=i(50419),d=i(87309),s=i(66871),l=i(49389),c=i(59432),u=i(37083),m=i(69421),f=i(1413),g={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42zm-134 50c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm296 294H328.1c-6.7 0-10.4-7.7-6.3-12.9l99.8-127.2a8 8 0 0112.6 0l41.1 52.4 77.8-99.2a8.1 8.1 0 0112.7 0l136.5 174c4.1 5.2.4 12.9-6.3 12.9z",fill:n}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}},{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0z",fill:e}}]}},name:"file-image",theme:"twotone"},x=i(8711),Z=function(e,n){return t.createElement(x.Z,(0,f.Z)((0,f.Z)({},e),{},{ref:n,icon:g}))};Z.displayName="FileImageTwoTone";var p=t.forwardRef(Z),h=i(36795),v=i(82464),j=i(11730),y=i(31549),M=i(68470),F=i(2703),$=i(73332),b=i(84376),D=i(82630),w=i(60083),I=i(46246),P=i.n(I),T=i(64880),k=i(80184);var C=function(e){var n=e.formType,i=e.editData,a=e.setIsModalVisible,d=(0,T.UO)().foodMenu,s=$.Z.useForm(),c=(0,o.Z)(s,1)[0],m=(0,b.D)(w.ec,{refetchQueries:[{query:w.rc,variables:{foodMenu:d}}],onCompleted:function(e){r.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),a(!1)}}),f=(0,o.Z)(m,2),g=f[0],x=f[1].loading,Z=(0,b.D)(w.L$,{refetchQueries:[{query:w.rc,variables:{foodMenu:d}}],onCompleted:function(e){r.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),a(!1)}}),p=(0,o.Z)(Z,2),h=p[0],v=p[1].loading;return(0,t.useEffect)((function(){if("edit"===n){var e={ingredients:P().createEditorState(i.ingredients),name:i.name};c.setFieldsValue(e)}else c.resetFields()}),[i,c,n]),(0,k.jsx)(u.Z,{spinning:x||v,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,k.jsxs)($.Z,{id:"DegreeForm",layout:"vertical",form:c,name:"control-hooks",onFinish:function(e){e.ingredients=e.ingredients.toHTML(),e.foodMenu=d,"edit"===n?(e.id=i.id,h({variables:e})):g({variables:e})},children:[(0,k.jsx)($.Z.Item,{name:"name",label:(0,k.jsx)(D.Z,{id:"name"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,k.jsx)(l.Z,{})}),(0,k.jsx)($.Z.Item,{name:"ingredients",label:(0,k.jsx)(D.Z,{id:"ingredients"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,k.jsx)(P(),{className:"border rounded-2",language:"en"})})]})})},z=i(96578),S=i(74165),N=i(15861),q=i(55064),L=i(36755),V=i(72351),H=i(59305),B=function(e){var n=e.editData,i=(0,z.a)(w.bO,{variables:{food:n.id}}),t=i.data,a=i.refetch,s=(0,b.D)(w.p5,{onCompleted:function(e){a(),r.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0443\u0443\u043b\u043b\u0430\u0430")}}),l=(0,o.Z)(s,2),c=l[0],u=l[1].loading;function m(){return(m=(0,N.Z)((0,S.Z)().mark((function e(i){return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{image:i.file,food:n.id}});case 2:i.onSuccess("Ok");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(q.Z,{multiple:!0,accept:".jpg, .png",orientation:"right",customRequest:function(e){return m.apply(this,arguments)},showUploadList:!1,children:(0,k.jsxs)(d.Z,{style:{float:"right"},size:"small",type:"primary",icon:(0,k.jsx)(V.Z,{}),loading:u,children:[" ",(0,k.jsx)(D.Z,{id:"main.upload-file"})," "]})}),(0,k.jsx)("div",{className:"mt-4 grid grid-cols-4 gap-4",children:null===t||void 0===t?void 0:t.allFoodFilesByFood.map((function(e,n){return(0,k.jsx)("div",{className:"mx-auto",children:(0,k.jsx)(L.Z,{className:"w-auto h-120",src:"".concat(H._O).concat(e.image),alt:"image description"})},n)}))})]})};var O=function(e){var n=(0,T.UO)().foodMenu,i=(0,z.a)(w.rc,{variables:{foodMenu:n},onCompleted:function(e){I(e.allFoods)}}),f=i.loading,g=i.data,x=(0,t.useState)(void 0),Z=(0,o.Z)(x,2),$=Z[0],I=Z[1],P=(0,t.useState)(!1),S=(0,o.Z)(P,2),N=S[0],q=S[1],L=(0,t.useState)(!1),V=(0,o.Z)(L,2),H=V[0],O=V[1],E=(0,t.useState)([]),R=(0,o.Z)(E,2),U=R[0],_=R[1],W=(0,t.useState)(""),Q=(0,o.Z)(W,2),A=Q[0],K=Q[1],G=a.Z.confirm,J=(0,b.D)(w.vj,{refetchQueries:[{query:w.rc,variables:{foodMenu:n}}],onCompleted:function(e){r.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),X=(0,o.Z)(J,2),Y=X[0],ee=X[1].loading,ne=[{key:"name",title:(0,k.jsx)(D.Z,{id:"name"}),dataIndex:"name",sorter:function(e,n){return F.ZP.antdTableSorter(e,n,"name")}},{key:"actions",title:(0,k.jsx)(D.Z,{id:"main.action"}),width:"20vw",dataIndex:"actions",render:function(n,i){return(0,k.jsxs)("div",{className:"text-center",children:[!0===e.permissions.edit&&(0,k.jsxs)(d.Z,{size:"small",type:"text",onClick:function(){return _(i),void O(!0)},children:[(0,k.jsx)(p,{}),(0,k.jsxs)("span",{className:"ml-2",children:[" ",(0,k.jsx)(D.Z,{id:"main.image"})]})]},"1"),!0===e.permissions.edit&&(0,k.jsxs)(d.Z,{size:"small",type:"text",onClick:function(){return e=i,K("edit"),_(e),void q(!0);var e},children:[(0,k.jsx)(h.Z,{twoToneColor:"#ffdb00"}),(0,k.jsxs)("span",{className:"ml-2",children:[" ",(0,k.jsx)(D.Z,{id:"edit"})]})]},"2"),!0===e.permissions.destroy&&(0,k.jsxs)(d.Z,{size:"small",type:"text",onClick:function(){return e=i,void G({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){Y({variables:{id:e.id}})}});var e},children:[(0,k.jsx)(v.Z,{twoToneColor:"#f42f2f"}),(0,k.jsxs)("span",{className:"ml-2",children:[" ",(0,k.jsx)(D.Z,{id:"delete"})]})]},"3")]})}}];return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(a.Z,{width:"80vw",visible:N,okText:(0,k.jsx)(D.Z,{id:"main.okText"}),cancelText:(0,k.jsx)(D.Z,{id:"main.cancelText"}),onCancel:function(){q(!1)},okButtonProps:{form:"DegreeForm",key:"submit",htmlType:"submit"},children:(0,k.jsx)(C,{editData:U,formType:A,setIsModalVisible:q})}),(0,k.jsx)(a.Z,{width:"80vw",visible:H,okText:(0,k.jsx)(D.Z,{id:"main.okText"}),cancelText:(0,k.jsx)(D.Z,{id:"main.cancelText"}),onCancel:function(){O(!1)},okButtonProps:{form:"DegreeForm",key:"submit",htmlType:"submit"},children:(0,k.jsx)(B,{editData:U})}),(0,k.jsxs)(s.Z,{children:[(0,k.jsxs)(M.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:[(0,k.jsx)(M.Z,{className:"mb-1",mobileFlex:!1,children:(0,k.jsx)("div",{className:"mr-md-3 mb-3",children:(0,k.jsx)(l.Z,{placeholder:"\u0425\u0430\u0439\u0445",prefix:(0,k.jsx)(j.Z,{}),onChange:function(e){return function(e){var n=e.currentTarget.value,i=e.currentTarget.value?$:null===g||void 0===g?void 0:g.allFoods,t=F.ZP.wildCardSearch(i,n);I(t)}(e)}})})}),!0===e.permissions.create&&(0,k.jsx)("div",{className:"mr-md-3 mb-3",children:(0,k.jsxs)(d.Z,{onClick:function(){K("create"),q(!0)},type:"primary",icon:(0,k.jsx)(y.Z,{}),block:!0,children:[" ",(0,k.jsx)(D.Z,{id:"add_new"})]})})]}),(0,k.jsx)("div",{className:"table-responsive",children:(0,k.jsx)(c.Z,{columns:ne,dataSource:null===g||void 0===g?void 0:g.allFoods,size:"small",rowKey:"id",bordered:!0,locale:{emptyText:f||ee?(0,k.jsx)(u.Z,{}):(0,k.jsx)(m.Z,{})}})})]})]})},E=i(59288),R=i(38937),U=function(){var e={create:(0,E.C)("add_degree"),edit:(0,E.C)("change_degree"),destroy:(0,E.C)("delete_degree")};return Object.values(e).indexOf("loading")>-1?(0,k.jsx)(R.Z,{cover:"content"}):(0,k.jsx)(O,{permissions:e})}},36795:function(e,n,i){i.d(n,{Z:function(){return s}});var t=i(1413),o=i(72791),a={icon:function(e,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M761.1 288.3L687.8 215 325.1 577.6l-15.6 89 88.9-15.7z",fill:n}},{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89z",fill:e}}]}},name:"edit",theme:"twotone"},r=i(8711),d=function(e,n){return o.createElement(r.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:n,icon:a}))};d.displayName="EditTwoTone";var s=o.forwardRef(d)},72351:function(e,n,i){i.d(n,{Z:function(){return s}});var t=i(1413),o=i(72791),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},r=i(8711),d=function(e,n){return o.createElement(r.Z,(0,t.Z)((0,t.Z)({},e),{},{ref:n,icon:a}))};d.displayName="UploadOutlined";var s=o.forwardRef(d)}}]);
//# sourceMappingURL=5174.14cee734.chunk.js.map