"use strict";(self.webpackChunkmkp=self.webpackChunkmkp||[]).push([[8447],{68447:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var o=t(29439),a=t(72791),c=t(96578),r=t(86586),l=t(84376),i=t(48936),s=t(1413),u=t(45987),d=t(47528),f=t(48593),m=t(59432),p=t(66871),h=t(71180),g=t.n(h),k=t(80184),v=["loading"],x=[{dataIndex:"title",title:"\u041d\u044d\u0440",render:function(e,n){return(0,k.jsx)(d.Z,{color:n.color,children:e})}}],Z=function(e){var n=e.loading,t=(0,u.Z)(e,v);return(0,k.jsx)(f.Z,(0,s.Z)((0,s.Z)({},t),{},{showSelectAll:!1,children:function(e){var t=e.filteredItems,o=e.onItemSelectAll,a=e.onItemSelect,c=e.selectedKeys,r=x,l={getCheckboxProps:function(e){return{disabled:e.disabled}},onSelectAll:function(e,n){var t=n.filter((function(e){return!e.disabled})).map((function(e){return e.key})),a=e?g()(t,c):g()(c,t);o(a,e)},onSelect:function(e,n){var t=e.key;a(t,n)},selectedRowKeys:c};return(0,k.jsx)(m.Z,{loading:n,rowSelection:l,columns:r,dataSource:t,size:"small",style:{pointerEvents:null},onRow:function(e){var n=e.key,t=e.disabled;return{onClick:function(){t||a(n,!c.includes(n))}}}})}}))},j=function(e){var n=e.data,t=e.permissions,o=e.loading,a=e.updateData,c=n.permissions.map((function(e){return e.codename}));return(0,k.jsx)(p.Z,{title:n.name,children:(0,k.jsx)(Z,{loading:o,dataSource:t,targetKeys:c,showSearch:!0,onChange:function(e,t,o){var c="left"!==t;o.map((function(e){return a({variables:{action:c,codename:e,id:n.id}})}))},filterOption:function(e,n){return-1!==n.title.toLowerCase().indexOf(e)}})})},S=function(){var e=(0,a.useState)([]),n=(0,o.Z)(e,2),t=n[0],s=n[1],u=(0,a.useState)([]),f=(0,o.Z)(u,2),m=f[0],p=f[1],h=(0,a.useState)(!0),g=(0,o.Z)(h,2),v=g[0],x=g[1],Z=(0,c.a)(i.YO,{onCompleted:function(e){s(e.allGroups),C()}}),S=Z.loading,b=Z.refetch,y=(0,r.t)(i._I,{onCompleted:function(e){var n=e.permissions.flatMap((function(e){var n=[];return e.add&&n.push({key:"add_".concat(e.codeName),title:"".concat(e.name," \u043d\u044d\u043c\u044d\u0445"),color:"green"}),e.change&&n.push({key:"change_".concat(e.codeName),title:"".concat(e.name," \u0437\u0430\u0441\u0430\u0445"),color:"orange"}),e.view&&n.push({key:"view_".concat(e.codeName),title:"".concat(e.name," \u0445\u0430\u0440\u0430\u0445"),color:"geekblue"}),e.delete&&n.push({key:"delete_".concat(e.codeName),title:"".concat(e.name," \u0443\u0441\u0442\u0433\u0430\u0445"),color:"magenta"}),n}));p(n)}}),w=(0,o.Z)(y,2),C=w[0],I=w[1].loading,N=(0,l.D)(i.xH,{onCompleted:function(e){b()}}),_=(0,o.Z)(N,2),A=_[0],D=_[1].loading;return(0,a.useEffect)((function(){(S||I||D)&&x(!0),S||I||D||x(!1)}),[S,I,D]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)(d.Z,{color:"green",children:"\u041d\u044d\u043c\u044d\u0445 \u044d\u0440\u0445"}),(0,k.jsx)(d.Z,{color:"orange",children:"\u0417\u0430\u0441\u0430\u0445 \u044d\u0440\u0445"}),(0,k.jsx)(d.Z,{color:"geekblue",children:"\u0425\u0430\u0440\u0430\u0445 \u044d\u0440\u0445"}),(0,k.jsx)(d.Z,{color:"magenta",children:"\u0423\u0441\u0442\u0433\u0430\u0445 \u044d\u0440\u0445"})]}),t.map((function(e,n){return(0,k.jsx)(j,{updateData:A,loading:v,data:e,permissions:m},n)}))]})}}}]);
//# sourceMappingURL=8447.ad07cb78.chunk.js.map