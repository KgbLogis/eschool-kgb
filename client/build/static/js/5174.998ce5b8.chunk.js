"use strict";(self.webpackChunkmkp=self.webpackChunkmkp||[]).push([[5174],{68470:function(n,e,t){t(72791);var i=t(80184),o=function(n){var e=n.children,t=n.className,o=n.alignItems,r=n.justifyContent,a=n.mobileFlex,d=n.flexDirection;return(0,i.jsx)("div",{className:"".concat(a?"d-flex":"d-md-flex"," ").concat(t," ").concat(d?"flex-"+d:""," ").concat(o?"align-items-"+o:""," ").concat(r?"justify-content-"+r:""),children:e})};o.defaultProps={mobileFlex:!0,flexDirection:"row",className:""},e.Z=o},60083:function(n,e,t){t.d(e,{L$:function(){return w},Re:function(){return T},Wc:function(){return C},bO:function(){return S},ec:function(){return I},ou:function(){return z},p5:function(){return N},qW:function(){return q},rc:function(){return D},tx:function(){return F},vj:function(){return k},wz:function(){return b},xW:function(){return y},yW:function(){return $},z4:function(){return P}});var i,o,r,a,d,l,s,c,u,m,f,g,v,p,x,Z,h,M=t(30168),j=t(27570),y=(0,j.Ps)(i||(i=(0,M.Z)(["\n    query allFoodMenus ($filter: String) {\n        allFoodMenus (filter: $filter){\n            id\n            program {\n                id\n                program\n            }\n            name \n        }\n    }\n"]))),F=(0,j.Ps)(o||(o=(0,M.Z)(["\n    mutation createFoodMenu ($name: String, $program: ID){\n        createFoodMenu(name: $name, program: $program){\n            foodMenu{\n                id\n            }\n        }\n    }\n\n"]))),$=(0,j.Ps)(r||(r=(0,M.Z)(["\n    mutation updateFoodMenu ($id: ID, $name: String, $program: ID){\n        updateFoodMenu (id: $id, name: $name, program: $program){\n            foodMenu{\n                id\n            }\n        }\n    }\n"]))),b=(0,j.Ps)(a||(a=(0,M.Z)(["\n    mutation deleteFoodMenu ($id: ID){\n        deleteFoodMenu (id: $id){\n            foodMenu{\n                name\n            }\n        }\n    }\n"]))),D=(0,j.Ps)(d||(d=(0,M.Z)(["\n    query allFoods ($foodMenu: ID!) {\n        allFoods (foodMenu: $foodMenu){\n            id\n            name\n            ingredients\n        }\n    }\n"]))),I=(0,j.Ps)(l||(l=(0,M.Z)(["\n    mutation createFood ($foodMenu: ID, $ingredients: String, $name: String){\n        createFood (foodMenu: $foodMenu, ingredients: $ingredients, name: $name) {\n            food {\n                id\n            }\n        }\n    }\n"]))),w=(0,j.Ps)(s||(s=(0,M.Z)(["\n    mutation updateFood ($foodMenu: ID, $id: ID, $ingredients: String, $name: String){\n        updateFood (foodMenu: $foodMenu, id: $id, ingredients: $ingredients, name: $name){\n            food {\n                id\n            }\n        }\n    }\n"]))),k=(0,j.Ps)(c||(c=(0,M.Z)(["\n    mutation deleteFood ($id: ID){\n        deleteFood (id: $id){\n            food {\n                name\n            }\n        }\n    }\n"]))),C=(0,j.Ps)(u||(u=(0,M.Z)(["\n    query allDailyMenus {\n        allDailyMenus {\n            id\n            program {\n                program\n            }\n            name\n            createdAt\n        }\n    }\n"]))),P=(0,j.Ps)(m||(m=(0,M.Z)(["\n    mutation createDailyMenu ($name: String, $program: ID) {\n        createDailyMenu (name: $name, program: $program) {\n            dailyMenu {\n                id\n            }\n        }\n    }\n"]))),T=(0,j.Ps)(f||(f=(0,M.Z)(["\n    mutation deleteDailyMenu ($id: ID){\n        deleteDailyMenu (id: $id){\n            dailyMenu {\n                name\n            }\n        }\n    }\n"]))),z=(0,j.Ps)(g||(g=(0,M.Z)(["\n    query allDailyMenuFoods ($dailyMenu: ID!){\n        allDailyMenuFoods (dailyMenu: $dailyMenu){\n            id\n            food {\n                name\n                ingredients\n                foodfileSet {\n                    image\n                }\n            }\n        }\n    }\n"]))),S=((0,j.Ps)(v||(v=(0,M.Z)(["\n    query foodById ($id: ID!){\n        foodById (id: $id){\n            id\n        }\n    }\n"]))),(0,j.Ps)(p||(p=(0,M.Z)(["\n    query allFoodFilesByFood ($food: ID!){\n        allFoodFilesByFood (food: $food){\n            id\n            image\n        }\n    }\n"])))),N=(0,j.Ps)(x||(x=(0,M.Z)(["\n    mutation createFoodFile ($food: ID, $image: Upload!){\n        createFoodFile (food: $food, image: $image){\n            foodFile {\n                id\n            }\n        }\n    }\n"]))),q=((0,j.Ps)(Z||(Z=(0,M.Z)(["\n    mutation deleteFoodFile ($id: ID){\n        deleteFoodFile (id: $id){\n            foodFile {\n                image\n            }\n        }\n    }\n"]))),(0,j.Ps)(h||(h=(0,M.Z)(["\n    mutation createDailyMenuFood ($dailyMenu: ID, $food: ID) {\n        createDailyMenuFood (dailyMenu: $dailyMenu, food: $food) {\n            dailyMenuFood {\n                id\n            }\n        }\n    }\n"]))))},95174:function(n,e,t){t.r(e),t.d(e,{default:function(){return _}});var i=t(72791),o=t(29439),r=t(20003),a=t(50419),d=t(87309),l=t(66871),s=t(49389),c=t(59432),u=t(37083),m=t(69421),f=t(1413),g={icon:function(n,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42zm-134 50c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm296 294H328.1c-6.7 0-10.4-7.7-6.3-12.9l99.8-127.2a8 8 0 0112.6 0l41.1 52.4 77.8-99.2a8.1 8.1 0 0112.7 0l136.5 174c4.1 5.2.4 12.9-6.3 12.9z",fill:e}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:n}},{tag:"path",attrs:{d:"M553.1 509.1l-77.8 99.2-41.1-52.4a8 8 0 00-12.6 0l-99.8 127.2a7.98 7.98 0 006.3 12.9H696c6.7 0 10.4-7.7 6.3-12.9l-136.5-174a8.1 8.1 0 00-12.7 0zM360 442a40 40 0 1080 0 40 40 0 10-80 0z",fill:n}}]}},name:"file-image",theme:"twotone"},v=t(8711),p=function(n,e){return i.createElement(v.Z,(0,f.Z)((0,f.Z)({},n),{},{ref:e,icon:g}))};p.displayName="FileImageTwoTone";var x=i.forwardRef(p),Z=t(36795),h=t(82464),M=t(11730),j=t(31549),y=t(68470),F=t(2703),$=t(73332),b=t(84376),D=t(82630),I=t(60083),w=t(46246),k=t.n(w),C=t(64880),P=t(80184);var T=function(n){var e=n.formType,t=n.editData,r=n.setIsModalVisible,d=(0,C.UO)().foodMenu,l=$.Z.useForm(),c=(0,o.Z)(l,1)[0],m=(0,b.D)(I.ec,{refetchQueries:[{query:I.rc,variables:{foodMenu:d}}],onCompleted:function(n){a.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),r(!1)}}),f=(0,o.Z)(m,2),g=f[0],v=f[1].loading,p=(0,b.D)(I.L$,{refetchQueries:[{query:I.rc,variables:{foodMenu:d}}],onCompleted:function(n){a.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0430\u0434\u0433\u0430\u043b\u043b\u0430\u0430"),r(!1)}}),x=(0,o.Z)(p,2),Z=x[0],h=x[1].loading;return(0,i.useEffect)((function(){if("edit"===e){var n={ingredients:k().createEditorState(t.ingredients),name:t.name};c.setFieldsValue(n)}else c.resetFields()}),[t,c,e]),(0,P.jsx)(u.Z,{spinning:v||h,tip:"\u0410\u0447\u0430\u0430\u043b\u043b\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...",children:(0,P.jsxs)($.Z,{id:"DegreeForm",layout:"vertical",form:c,name:"control-hooks",onFinish:function(n){n.ingredients=n.ingredients.toHTML(),n.foodMenu=d,"edit"===e?(n.id=t.id,Z({variables:n})):g({variables:n})},children:[(0,P.jsx)($.Z.Item,{name:"name",label:(0,P.jsx)(D.Z,{id:"name"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,P.jsx)(s.Z,{})}),(0,P.jsx)($.Z.Item,{name:"ingredients",label:(0,P.jsx)(D.Z,{id:"ingredients"}),rules:[{required:!0,message:"\u0425\u043e\u043e\u0441\u043e\u043d \u043e\u0440\u0445\u0438\u0445 \u0431\u043e\u043b\u043e\u043c\u0436\u0433\u04af\u0439"}],children:(0,P.jsx)(k(),{className:"border rounded-2",language:"en"})})]})})},z=t(96578),S=t(74165),N=t(15861),q=t(55064),L=t(36755),V=t(72351),E=t(59305),H=function(n){var e=n.editData,t=(0,z.a)(I.bO,{variables:{food:e.id}}),i=t.data,r=t.refetch,l=(0,b.D)(I.p5,{onCompleted:function(n){r(),a.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0445\u0443\u0443\u043b\u043b\u0430\u0430")}}),s=(0,o.Z)(l,2),c=s[0],u=s[1].loading;function m(){return(m=(0,N.Z)((0,S.Z)().mark((function n(t){return(0,S.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c({variables:{image:t.file,food:e.id}});case 2:t.onSuccess("Ok");case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(q.Z,{multiple:!0,accept:".jpg, .png",orientation:"right",customRequest:function(n){return m.apply(this,arguments)},showUploadList:!1,children:(0,P.jsxs)(d.Z,{style:{float:"right"},size:"small",type:"primary",icon:(0,P.jsx)(V.Z,{}),loading:u,children:[" ",(0,P.jsx)(D.Z,{id:"main.upload-file"})," "]})}),(0,P.jsx)("div",{className:"mt-4 grid grid-cols-4 gap-4",children:null===i||void 0===i?void 0:i.allFoodFilesByFood.map((function(n,e){return(0,P.jsx)("div",{className:"mx-auto",children:(0,P.jsx)(L.Z,{className:"w-auto h-120",src:"".concat(E._O).concat(n.image),alt:"image description"})},e)}))})]})};var O=function(n){var e=(0,C.UO)().foodMenu,t=(0,z.a)(I.rc,{variables:{foodMenu:e},onCompleted:function(n){w(n.allFoods)}}),f=t.loading,g=t.data,v=(0,i.useState)(void 0),p=(0,o.Z)(v,2),$=p[0],w=p[1],k=(0,i.useState)(!1),S=(0,o.Z)(k,2),N=S[0],q=S[1],L=(0,i.useState)(!1),V=(0,o.Z)(L,2),E=V[0],O=V[1],B=(0,i.useState)([]),R=(0,o.Z)(B,2),_=R[0],U=R[1],Q=(0,i.useState)(""),W=(0,o.Z)(Q,2),A=W[0],J=W[1],K=r.Z.confirm,G=(0,b.D)(I.vj,{refetchQueries:[{query:I.rc,variables:{foodMenu:e}}],onCompleted:function(n){a.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u0443\u0441\u0442\u043b\u0430\u0430")}}),X=(0,o.Z)(G,2),Y=X[0],nn=X[1].loading,en=[{key:"name",title:(0,P.jsx)(D.Z,{id:"name"}),dataIndex:"name",sorter:function(n,e){return F.ZP.antdTableSorter(n,e,"name")}},{key:"actions",title:(0,P.jsx)(D.Z,{id:"main.action"}),width:"20vw",dataIndex:"actions",render:function(e,t){return(0,P.jsxs)("div",{className:"text-center",children:[!0===n.permissions.edit&&(0,P.jsxs)(d.Z,{size:"small",type:"text",onClick:function(){return U(t),void O(!0)},children:[(0,P.jsx)(x,{}),(0,P.jsxs)("span",{className:"ml-2",children:[" ",(0,P.jsx)(D.Z,{id:"main.image"})]})]},"1"),!0===n.permissions.edit&&(0,P.jsxs)(d.Z,{size:"small",type:"text",onClick:function(){return n=t,J("edit"),U(n),void q(!0);var n},children:[(0,P.jsx)(Z.Z,{twoToneColor:"#ffdb00"}),(0,P.jsxs)("span",{className:"ml-2",children:[" ",(0,P.jsx)(D.Z,{id:"edit"})]})]},"2"),!0===n.permissions.destroy&&(0,P.jsxs)(d.Z,{size:"small",type:"text",onClick:function(){return n=t,void K({title:"\u0423\u0441\u0442\u0433\u0430\u0445 \u0443\u0443?",okText:"\u0423\u0441\u0442\u0433\u0430\u0445",okType:"danger",cancelText:"\u0411\u043e\u043b\u0438\u0445",onOk:function(){Y({variables:{id:n.id}})}});var n},children:[(0,P.jsx)(h.Z,{twoToneColor:"#f42f2f"}),(0,P.jsxs)("span",{className:"ml-2",children:[" ",(0,P.jsx)(D.Z,{id:"delete"})]})]},"3")]})}}];return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(r.Z,{width:"80vw",visible:N,okText:(0,P.jsx)(D.Z,{id:"main.okText"}),cancelText:(0,P.jsx)(D.Z,{id:"main.cancelText"}),onCancel:function(){q(!1)},okButtonProps:{form:"DegreeForm",key:"submit",htmlType:"submit"},children:(0,P.jsx)(T,{editData:_,formType:A,setIsModalVisible:q})}),(0,P.jsx)(r.Z,{width:"80vw",visible:E,okText:(0,P.jsx)(D.Z,{id:"main.okText"}),cancelText:(0,P.jsx)(D.Z,{id:"main.cancelText"}),onCancel:function(){O(!1)},okButtonProps:{form:"DegreeForm",key:"submit",htmlType:"submit"},children:(0,P.jsx)(H,{editData:_})}),(0,P.jsxs)(l.Z,{children:[(0,P.jsxs)(y.Z,{alignItems:"center",justifyContent:"between",mobileFlex:!1,children:[(0,P.jsx)(y.Z,{className:"mb-1",mobileFlex:!1,children:(0,P.jsx)("div",{className:"mr-md-3 mb-3",children:(0,P.jsx)(s.Z,{placeholder:"\u0425\u0430\u0439\u0445",prefix:(0,P.jsx)(M.Z,{}),onChange:function(n){return function(n){var e=n.currentTarget.value,t=n.currentTarget.value?$:null===g||void 0===g?void 0:g.allFoods,i=F.ZP.wildCardSearch(t,e);w(i)}(n)}})})}),!0===n.permissions.create&&(0,P.jsx)("div",{className:"mr-md-3 mb-3",children:(0,P.jsxs)(d.Z,{onClick:function(){J("create"),q(!0)},type:"primary",icon:(0,P.jsx)(j.Z,{}),block:!0,children:[" ",(0,P.jsx)(D.Z,{id:"add_new"})]})})]}),(0,P.jsx)("div",{className:"table-responsive",children:(0,P.jsx)(c.Z,{columns:en,dataSource:null===g||void 0===g?void 0:g.allFoods,size:"small",rowKey:"id",bordered:!0,locale:{emptyText:f||nn?(0,P.jsx)(u.Z,{}):(0,P.jsx)(m.Z,{})}})})]})]})},B=t(59288),R=t(38937),_=function(){var n={create:(0,B.C)("add_degree"),edit:(0,B.C)("change_degree"),destroy:(0,B.C)("delete_degree")};return Object.values(n).indexOf("loading")>-1?(0,P.jsx)(R.Z,{cover:"content"}):(0,P.jsx)(O,{permissions:n})}},36795:function(n,e,t){t.d(e,{Z:function(){return l}});var i=t(1413),o=t(72791),r={icon:function(n,e){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M761.1 288.3L687.8 215 325.1 577.6l-15.6 89 88.9-15.7z",fill:e}},{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89z",fill:n}}]}},name:"edit",theme:"twotone"},a=t(8711),d=function(n,e){return o.createElement(a.Z,(0,i.Z)((0,i.Z)({},n),{},{ref:e,icon:r}))};d.displayName="EditTwoTone";var l=o.forwardRef(d)},72351:function(n,e,t){t.d(e,{Z:function(){return l}});var i=t(1413),o=t(72791),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},a=t(8711),d=function(n,e){return o.createElement(a.Z,(0,i.Z)((0,i.Z)({},n),{},{ref:e,icon:r}))};d.displayName="UploadOutlined";var l=o.forwardRef(d)},84376:function(n,e,t){t.d(e,{D:function(){return c}});var i=t(3431),o=t(72791),r=t(63124),a=t(5970),d=t(72364),l=t(29484),s=t(65046);function c(n,e){var t=(0,s.x)(null===e||void 0===e?void 0:e.client);(0,d.Vp)(n,d.n_.Mutation);var c=(0,o.useState)({called:!1,loading:!1,client:t}),u=c[0],m=c[1],f=(0,o.useRef)({result:u,mutationId:0,isMounted:!0,client:t,mutation:n,options:e});Object.assign(f.current,{client:t,options:e,mutation:n});var g=(0,o.useCallback)((function(n){void 0===n&&(n={});var e=f.current,t=e.client,o=e.options,d=e.mutation,s=(0,i.pi)((0,i.pi)({},o),{mutation:d});f.current.result.loading||s.ignoreResults||!f.current.isMounted||m(f.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:t});var c=++f.current.mutationId,u=(0,r.J)(s,n);return t.mutate(u).then((function(e){var i,o,r,d=e.data,s=e.errors,g=s&&s.length>0?new l.c({graphQLErrors:s}):void 0;if(c===f.current.mutationId&&!u.ignoreResults){var v={called:!0,loading:!1,data:d,error:g,client:t};f.current.isMounted&&!(0,a.D)(f.current.result,v)&&m(f.current.result=v)}return null===(o=null===(i=f.current.options)||void 0===i?void 0:i.onCompleted)||void 0===o||o.call(i,e.data,u),null===(r=n.onCompleted)||void 0===r||r.call(n,e.data,u),e})).catch((function(e){var i,o,r,d;if(c===f.current.mutationId&&f.current.isMounted){var l={loading:!1,error:e,data:void 0,called:!0,client:t};(0,a.D)(f.current.result,l)||m(f.current.result=l)}if((null===(i=f.current.options)||void 0===i?void 0:i.onError)||u.onError)return null===(r=null===(o=f.current.options)||void 0===o?void 0:o.onError)||void 0===r||r.call(o,e,u),null===(d=n.onError)||void 0===d||d.call(n,e,u),{data:void 0,errors:e};throw e}))}),[]),v=(0,o.useCallback)((function(){f.current.isMounted&&m({called:!1,loading:!1,client:t})}),[]);return(0,o.useEffect)((function(){return f.current.isMounted=!0,function(){f.current.isMounted=!1}}),[]),[g,(0,i.pi)({reset:v},u)]}}}]);
//# sourceMappingURL=5174.998ce5b8.chunk.js.map