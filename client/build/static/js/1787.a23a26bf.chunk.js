"use strict";(self.webpackChunkmkp=self.webpackChunkmkp||[]).push([[1787],{41787:function(e,s,t){t.r(s),t.d(s,{default:function(){return I}});var l,a=t(29394),n=t(72791),r=t(29439),i=t(30168),o=t(50419),c=t(90785),m=t(73332),d=t(49389),x=t(87309),u=t(29529),h=t(38999),f=t(15471),p=t(64880),j=t(26872),g=t(27570),w=t(84376),b=t(82630),v=t(53719),k=t(80184),N=(0,g.Ps)(l||(l=(0,i.Z)(["\n    mutation tokenAuth($username: String!, $password: String!){\n        tokenAuth(username: $username, password: $password) {\n\t\t\tsuccess,\n\t\t\terrors,\n\t\t\tunarchiving,\n\t\t\ttoken,\n\t\t\t# refreshToken,\n\t\t\tunarchiving,\n\t\t\tuser {\n\t\t\t\tid,\n\t\t\t\tfirstName,\n\t\t\t\tlastName,\n\t\t\t\tusername,\n\t\t\t}\n        }\n    }\n"]))),y=function(e){var s=(0,p.k6)(),t=(0,n.useContext)(v.S),l=t.user,a=t.refetch,i=localStorage.getItem(f.UA),g=(0,n.useState)(!1),y=(0,r.Z)(g,2),Z=y[0],I=y[1];var S=(0,w.D)(N,{onCompleted:function(e){if(!0===e.tokenAuth.success)o.ZP.success("\u0410\u043c\u0436\u0438\u043b\u0442\u0442\u0430\u0439 \u043d\u044d\u0432\u0442\u044d\u0440\u043b\u044d\u044d!"),localStorage.setItem(f.UA,e.tokenAuth.token),a();else I(!0)}}),A=(0,r.Z)(S,2),P=A[0],C=A[1].loading;return Z&&setTimeout((function(){I(!1)}),3e3),(0,n.useEffect)((function(){i&&l&&s.push("/app/home")}),[l,i]),(0,k.jsxs)("div",{children:[(0,k.jsx)(j.ww.div,{initial:{opacity:0,marginBottom:0},animate:{opacity:Z?1:0,marginBottom:Z?20:0},children:(0,k.jsx)(c.Z,{type:"error",showIcon:!0,message:(0,k.jsx)(b.Z,{id:"login-fail"})})}),(0,k.jsxs)(m.Z,{layout:"vertical",name:"login-form",onFinish:function(e){P({variables:{username:e.username,password:e.password}})},children:[(0,k.jsx)(m.Z.Item,{name:"username",label:(0,k.jsx)(b.Z,{id:"username"}),rules:[{required:!0,message:"\u041d\u044d\u0432\u0442\u0440\u044d\u0445 \u043d\u044d\u0440 \u043e\u0440\u0443\u0443\u043b\u043d\u0430 \u0443\u0443"}],children:(0,k.jsx)(d.Z,{prefix:(0,k.jsx)(u.Z,{className:"text-primary"})})}),(0,k.jsx)(m.Z.Item,{name:"password",label:(0,k.jsx)("div",{children:(0,k.jsx)("span",{children:(0,k.jsx)(b.Z,{id:"password"})})}),rules:[{required:!0,message:"\u041d\u0443\u0443\u0446 \u04af\u0433 \u043e\u0440\u0443\u0443\u043b\u043d\u0430 \u0443\u0443"}],children:(0,k.jsx)(d.Z.Password,{prefix:(0,k.jsx)(h.Z,{className:"text-primary"})})}),(0,k.jsx)(m.Z.Item,{children:(0,k.jsxs)(x.Z,{type:"primary",htmlType:"submit",block:!0,loading:C,children:[" ",(0,k.jsx)(b.Z,{id:"main.login"})]})})]})]})};y.defaultProps={otherSignIn:!0,showForgetPassword:!1};var Z=y,I=function(){var e=(0,a.Z)().domainData;return(0,k.jsxs)("section",{className:"absolute w-full h-full",children:[(0,k.jsx)("div",{className:"absolute top-0 w-full h-full bg-mkp-2"}),(0,k.jsx)("div",{className:"container mx-auto px-4 h-full",children:(0,k.jsxs)("div",{className:"flex content-center items-center justify-center h-full",children:[(0,k.jsx)("div",{className:"hidden lg:block w-3/12 px-4",children:(0,k.jsx)("img",{src:"/img/flags/login-mn.png",alt:"Left decoration",className:"w-full h-auto"})}),(0,k.jsx)("div",{className:"w-full lg:w-4/12 px-4",children:(0,k.jsxs)("div",{className:"relative flex flex-col min-w-0 break-words w-full mb-6 shadow-lg rounded-lg bg-[#f9f1dc] border-0",children:[(0,k.jsx)("div",{className:"rounded-t mb-0 px-6 py-6",children:(0,k.jsx)("div",{className:"text-center ",children:(0,k.jsx)("img",{alt:"\u041c\u043e\u043d \u041a\u043e\u0440 \u0424\u043e\u0432\u0435\u0440",className:"w-44 mx-auto",src:e.logo})})}),(0,k.jsx)("div",{className:"flex-auto px-4 lg:px-10 py-10 pt-0",children:(0,k.jsx)(Z,{})})]})}),(0,k.jsx)("div",{className:"hidden lg:block w-3/12 px-4",children:(0,k.jsx)("img",{src:"/img/flags/login-ko.png",alt:"Right decoration",className:"w-full h-auto"})})]})}),(0,k.jsx)("footer",{className:"hidden absolute w-full bottom-0 bg-mkp",children:(0,k.jsxs)("div",{className:"container mx-auto px-4",children:[(0,k.jsx)("hr",{className:"mb-6 border-b-1 border-gray-700"}),(0,k.jsxs)("div",{className:"flex flex-wrap items-center md:justify-between justify-center",children:[(0,k.jsx)("div",{className:"w-full md:w-4/12 px-4",children:(0,k.jsxs)("div",{className:"text-sm text-mkp-2 font-semibold py-1",children:["\xa9 ",(new Date).getFullYear(),(0,k.jsxs)("a",{href:"/",className:"text-mkp-2 hover:text-mkp-2-600 text-sm font-semibold py-1",children:[" ","\u041c\u043e\u043d \u041a\u043e\u0440 \u0424\u043e\u0432\u0435\u0440"]})]})}),(0,k.jsx)("div",{className:"w-full md:w-8/12 px-4",children:(0,k.jsxs)("ul",{className:"flex flex-wrap list-none md:justify-end justify-center",children:[(0,k.jsx)("li",{children:(0,k.jsx)("a",{href:"/",className:"text-mkp-2 hover:text-mkp-2-600 text-sm font-semibold block py-1 px-3",children:"\u04ae\u0439\u043b\u0447\u0438\u043b\u0433\u044d\u044d\u043d\u0438\u0439 \u043d\u04e9\u0445\u0446\u04e9\u043b"})}),(0,k.jsx)("li",{children:(0,k.jsx)("a",{href:"/",className:"text-mkp-2 hover:text-mkp-2-600 text-sm font-semibold block py-1 px-3",children:"\u041d\u0443\u0443\u0446\u043b\u0430\u043b\u044b\u043d \u0431\u043e\u0434\u043b\u043e\u0433\u043e"})})]})})]})]})})]})}}}]);
//# sourceMappingURL=1787.a23a26bf.chunk.js.map