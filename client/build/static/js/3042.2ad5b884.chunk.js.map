{"version":3,"file":"static/js/3042.2ad5b884.chunk.js","mappings":"+TAUQA,EAAaC,EAAAA,EAAAA,SAkMrB,UAhMsB,WAElB,IAAMC,EAAa,IAAIC,OAAO,2BAE9B,EAAeC,EAAAA,EAAAA,UAARC,GAAsB,YAAlB,GAELC,GAAcC,EAAAA,EAAAA,YAAWC,EAAAA,GAC/B,GAAeC,EAAAA,EAAAA,UAASH,EAAYI,MAA7BA,GAAkC,YAA9B,GAEHC,GAAYC,EAAAA,EAAAA,GAASC,EAAAA,GAAY,CACrCC,YAAa,SAAAC,GACTV,EAAKW,eAAeD,EAAKE,YAC7B,IAHIN,QAMR,GAA6CO,EAAAA,EAAAA,GAAYC,EAAAA,GAAgB,CACrEL,YAAa,SAAAC,GACTK,EAAAA,GAAAA,QAAgB,wHAChBT,GACJ,IACF,eALKU,EAAM,KAAaC,EAAa,KAAtBC,QAWjB,OACI,SAAC,IAAI,WACD,UAAC,IAAG,YACA,SAAC,IAAG,CAACC,GAAI,GAAIC,GAAI,GAAIC,GAAI,EAAGC,UAAU,mBAAkB,SAE5CjB,EAAKkB,WAED,SAAC,IAAM,CACHC,KAAM,IACNC,IAAKC,EAAAA,GAAgBrB,EAAKsB,QAAQC,QAGnCvB,EAAKwB,WAER,SAAC,IAAM,CACHL,KAAM,IACNC,IAAKC,EAAAA,GAAgBrB,EAAKyB,QAAQF,SAKtC,SAAC,IAAM,CACHJ,KAAM,IACNO,MAAO,CAAEC,gBAAiB,WAC1BC,MAAM,SAAC,IAAY,SAWvC,SAAC,IAAG,CAACd,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAG,UACxB,gBAAKC,UAAU,OAAM,UACjB,SAAC,IAAI,CACDY,KAAK,mBACLC,OAAO,WACPC,SA5CP,SAACC,GACdrB,EAAO,CAAEsB,UAAWD,GACxB,EA2CwBrC,KAAMA,EAAK,UAEX,SAAC,IAAG,WACA,UAAC,IAAG,CAACmB,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIkB,GAAI,GAAG,WAChC,UAAC,IAAG,CAACC,OAAQC,EAAAA,GAAW,WACpB,SAAC,IAAG,CAACtB,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAG,UACxB,SAAC,SAAS,CACNqB,OAAO,SAAC,IAAW,CAACC,GAAG,eACvBT,KAAK,aACLU,MAAO,CACH,CACIC,UAAU,EACV9B,SAAS,SAAC,IAAW,CAAC4B,GAAG,oBAE/B,UAEF,SAAC,IAAK,SAGd,SAAC,IAAG,CAACxB,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAG,UACxB,SAAC,SAAS,CACNqB,OAAO,SAAC,IAAW,CAACC,GAAG,SACvBT,KAAK,OACLU,MAAO,CACH,CACIC,UAAU,EACV9B,SAAS,SAAC,IAAW,CAAC4B,GAAG,oBAE/B,UAEF,SAAC,IAAK,SAGd,SAAC,IAAG,CAACxB,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAG,UACxB,SAAC,SAAS,CACNqB,OAAO,SAAC,IAAW,CAACC,GAAG,UACvBT,KAAK,QACLU,MAAO,CACH,CACIC,UAAU,EACV9B,SAAS,SAAC,IAAW,CAAC4B,GAAG,mBAE7B,CACIG,KAAM,QACN/B,QAAS,kGAEf,UAEF,SAAC,IAAK,SAGd,SAAC,IAAG,CAACI,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAG,UACxB,SAAC,SAAS,CACNqB,OAAO,SAAC,IAAW,CAACC,GAAG,UACvBT,KAAK,QACLU,MAAO,CACH,CACIC,UAAU,EACV9B,SAAS,SAAC,IAAW,CAAC4B,GAAG,mBAE7B,CACII,UAAS,SAACC,EAAMC,GACZ,OAAKpD,EAAWqD,KAAKD,GAGdE,QAAQC,UAFJD,QAAQE,OAAO,2IAG9B,IAEN,UAEF,SAAC,IAAK,SAGd,SAAC,IAAG,CAAClC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAG,UACxB,SAAC,SAAS,CACNqB,OAAO,SAAC,IAAW,CAACC,GAAG,WACvBT,KAAK,SACLU,MAAO,CACH,CACIC,UAAU,EACV9B,SAAS,SAAC,IAAW,CAAC4B,GAAG,mBAE7B,CACII,UAAS,SAACC,EAAMC,GACZ,OAAKpD,EAAWqD,KAAKD,GAGdE,QAAQC,UAFJD,QAAQE,OAAO,2IAG9B,IAEN,UAEF,SAAC,IAAK,SAGd,SAAC,IAAG,CAAClC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAG,UACxB,SAAC,SAAS,CACNqB,OAAO,SAAC,IAAW,CAACC,GAAG,YACvBT,KAAK,UACLU,MAAO,CACH,CACIC,UAAU,EACV9B,SAAS,SAAC,IAAW,CAAC4B,GAAG,oBAE/B,UAEF,SAAChD,EAAQ,CAAC2D,KAAM,YAI5B,SAAC,SAAS,CAAChC,UAAU,aAAY,UAC7B,SAAC,IAAM,CAACwB,KAAK,UAAUS,SAAS,SAASrC,QAASD,EAAc,UAC3D,SAAC,IAAW,CAAC0B,GAAG,mCAW7D,C","sources":["views/app-views/user-settings/update-profile.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { Form, Avatar, Button, Input, Row, Col, Card, message } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { ROW_GUTTER } from 'constants/ThemeConstant';\r\nimport { UserContext } from 'hooks/UserContextProvider';\r\nimport { BASE_SERVER_URL } from 'configs/AppConfig';\r\nimport IntlMessage from 'components/util-components/IntlMessage';\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport { MY_PROFILE, UPDATE_PROFILE } from 'graphql/user';\r\n\r\nconst { TextArea } = Input;\r\n\r\nconst UpdateProfile = () => {\r\n\r\n    const phoneRegEx = new RegExp(/^[7-9][0-9]{3}[0-9]{4}$/u);\r\n\r\n    const [form] = Form.useForm();\r\n    \r\n    const contextData = useContext(UserContext)\r\n    const [user] = useState(contextData.user);\r\n\r\n    const { refetch } = useQuery(MY_PROFILE, {\r\n        onCompleted: data => {\r\n            form.setFieldsValue(data.accountSelf)\r\n        }\r\n    })\r\n\r\n    const [update, { loading: updateLoading }] = useMutation(UPDATE_PROFILE, {\r\n        onCompleted: data => {\r\n            message.success(\"Амжилттай шинэчиллээ!\");\r\n            refetch();\r\n        }\r\n    })\r\n\r\n    const onFinish = (values) => {\r\n        update({ variables: values })\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <Row>\r\n                <Col xs={24} sm={24} md={8} className='text-center mt-4'>\r\n                    {( () => {\r\n                        if (user.isStudent) {\r\n                            return (\r\n                                <Avatar\r\n                                    size={300} \r\n                                    src={BASE_SERVER_URL+user.student.photo}\r\n                                />\r\n                            )\r\n                        } else if (user.isTeacher) {\r\n                            return (\r\n                                <Avatar\r\n                                    size={300} \r\n                                    src={BASE_SERVER_URL+user.teacher.photo}\r\n                                />\r\n                            )\r\n                        } else {\r\n                            return (\r\n                                <Avatar\r\n                                    size={300} \r\n                                    style={{ backgroundColor: '#87d068' }}\r\n                                    icon={<UserOutlined />}\r\n                                />\r\n                            )\r\n                        }\r\n                    })()}\r\n                    {/* <div className=\"mt-5\">\r\n                        <Upload onChange={`onUploadAavater`} showUploadList={false} action={`   `}>\r\n                            <Button icon={<UploadOutlined />} type=\"primary\"> <IntlMessage id=\"main.upload-image\" /></Button>\r\n                        </Upload>\r\n                    </div> */}\r\n                </Col>\r\n                <Col xs={24} sm={24} md={16}>\r\n                    <div className=\"mt-4\">\r\n                        <Form\r\n                            name=\"basicInformation\"\r\n                            layout=\"vertical\"\r\n                            onFinish={onFinish}\r\n                            form={form}\r\n                        >\r\n                            <Row>\r\n                                <Col xs={24} sm={24} md={24} lg={24}>\r\n                                    <Row gutter={ROW_GUTTER}>\r\n                                        <Col xs={24} sm={24} md={12}>\r\n                                            <Form.Item\r\n                                                label={<IntlMessage id=\"familyName\" />}\r\n                                                name=\"familyName\"\r\n                                                rules={[\r\n                                                    { \r\n                                                        required: true,\r\n                                                        message: <IntlMessage id=\"form.required\" />\r\n                                                    }\r\n                                                ]}\r\n                                            >\r\n                                                <Input />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                        <Col xs={24} sm={24} md={12}>\r\n                                            <Form.Item\r\n                                                label={<IntlMessage id=\"name\" />}\r\n                                                name=\"name\"\r\n                                                rules={[\r\n                                                    { \r\n                                                        required: true,\r\n                                                        message: <IntlMessage id=\"form.required\" />\r\n                                                    }\r\n                                                ]}\r\n                                            >\r\n                                                <Input />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                        <Col xs={24} sm={24} md={24}>\r\n                                            <Form.Item\r\n                                                label={<IntlMessage id=\"email\" />}\r\n                                                name=\"email\"\r\n                                                rules={[\r\n                                                    {\r\n                                                        required: true,\r\n                                                        message: <IntlMessage id=\"form.required\" />\r\n                                                    },\r\n                                                    {\r\n                                                        type: 'email',\r\n                                                        message: 'И-мэйл буруу байна'\r\n                                                    },\r\n                                                ]}\r\n                                            >\r\n                                                <Input />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                        <Col xs={24} sm={24} md={12}>\r\n                                            <Form.Item\r\n                                                label={<IntlMessage id=\"phone\" />}\r\n                                                name=\"phone\"\r\n                                                rules={[\r\n                                                    { \r\n                                                        required: true,\r\n                                                        message: <IntlMessage id=\"form.required\" />\r\n                                                    },\r\n                                                    {\r\n                                                        validator(rule, value) {\r\n                                                            if (!phoneRegEx.test(value)) {\r\n                                                                return Promise.reject('Утасны дугаар буруу байна!');\r\n                                                            }\r\n                                                            return Promise.resolve();\r\n                                                        },\r\n                                                    }\r\n                                                ]}\r\n                                            >\r\n                                                <Input />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                        <Col xs={24} sm={24} md={12}>\r\n                                            <Form.Item\r\n                                                label={<IntlMessage id=\"phone2\" />}\r\n                                                name=\"phone2\"\r\n                                                rules={[\r\n                                                    { \r\n                                                        required: true,\r\n                                                        message: <IntlMessage id=\"form.required\" />\r\n                                                    },\r\n                                                    {\r\n                                                        validator(rule, value) {\r\n                                                            if (!phoneRegEx.test(value)) {\r\n                                                                return Promise.reject('Утасны дугаар буруу байна!');\r\n                                                            }\r\n                                                            return Promise.resolve();\r\n                                                        },\r\n                                                    }\r\n                                                ]}\r\n                                            >\r\n                                                <Input />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                        <Col xs={24} sm={24} md={12}>\r\n                                            <Form.Item\r\n                                                label={<IntlMessage id=\"address\" />}\r\n                                                name=\"address\"\r\n                                                rules={[\r\n                                                    { \r\n                                                        required: true,\r\n                                                        message: <IntlMessage id=\"form.required\" />\r\n                                                    }\r\n                                                ]}\r\n                                            >\r\n                                                <TextArea rows={4} />\r\n                                            </Form.Item>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Form.Item className='text-right'>\r\n                                        <Button type=\"primary\" htmlType=\"submit\" loading={updateLoading}>\r\n                                            {<IntlMessage id=\"main.okText\" />}\r\n                                        </Button>\r\n                                    </Form.Item>\r\n                                </Col>\r\n                            </Row>\r\n                        </Form>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        </Card>\r\n    )\r\n};\r\n\r\nexport default UpdateProfile;\r\n"],"names":["TextArea","Input","phoneRegEx","RegExp","Form","form","contextData","useContext","UserContext","useState","user","refetch","useQuery","MY_PROFILE","onCompleted","data","setFieldsValue","accountSelf","useMutation","UPDATE_PROFILE","message","update","updateLoading","loading","xs","sm","md","className","isStudent","size","src","BASE_SERVER_URL","student","photo","isTeacher","teacher","style","backgroundColor","icon","name","layout","onFinish","values","variables","lg","gutter","ROW_GUTTER","label","id","rules","required","type","validator","rule","value","test","Promise","resolve","reject","rows","htmlType"],"sourceRoot":""}